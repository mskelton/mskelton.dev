<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Mark Skelton</title>
        <link>https://mskelton.dev</link>
        <description>Software developer, Christ follower, small town kid.</description>
        <lastBuildDate>Thu, 02 Feb 2023 14:17:26 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <image>
            <title>Mark Skelton</title>
            <url>https://mskelton.dev/favicon.ico</url>
            <link>https://mskelton.dev</link>
        </image>
        <copyright>All rights reserved 2023</copyright>
        <item>
            <title><![CDATA[Better Code Highlighting with Shiki]]></title>
            <link>https://mskelton.dev/blog/better-code-highlighting-with-shiki</link>
            <guid>https://mskelton.dev/blog/better-code-highlighting-with-shiki</guid>
            <pubDate>Fri, 23 Dec 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Maintaining a developer blog almost always includes code highlighting. I recently switched from Prism to Shiki for more accurate and familiar code highlighting.]]></description>
            <content:encoded><![CDATA[<p>I’ve used Prism for code highlighting in many projects, but I’ve never been very
happy with the results as it usually struggles to properly detect syntax,
especially with uncommon languages, or with JSX. As I was scrolling through
Twitter the other day, I saw some mention about a project called
<a href="https://github.com/shikijs/shiki">Shiki</a>, which uses TextMate grammars and VS
Code themes to perform syntax highlighting. This seemed like a great solution
for code highlighting, so I decided to give it a try.</p>
<p>After a very simple process of installing shiki as well as the
<a href="https://github.com/stefanprobst/rehype-shiki">rehype-shiki</a> plugin, I was able
to convert my blog to using shiki without any major gotchas! Check out the
before/after image below to see the difference shiki makes in properly
highlighting code!</p>
<div style="position:relative;overflow:hidden;user-select:none;-khtml-user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none" data-rcs="root"><img alt="Old syntax highlighting" srcSet="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fold.bd44c046.png&amp;w=1920&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fold.bd44c046.png&amp;w=3840&amp;q=75 2x" src="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fold.bd44c046.png&amp;w=3840&amp;q=75" width="1344" height="1084" decoding="async" data-nimg="1" loading="lazy" style="color:transparent;display:block;width:100%;height:100%;max-width:100%;box-sizing:border-box;object-fit:cover;object-position:center;background-size:cover;background-position:center;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http%3A//www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 8 6&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;1&#x27;/%3E%3C/filter%3E%3Cimage preserveAspectRatio=&#x27;none&#x27; filter=&#x27;url(%23b)&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; height=&#x27;100%25&#x27; width=&#x27;100%25&#x27; href=&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAABlBMVEUPDxEZGRs8VlQ6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAFUlEQVQImWNgYGRkZEAFcBFMKSgAAAF6AAq/dVVDAAAAAElFTkSuQmCC&#x27;/%3E%3C/svg%3E&quot;)"/><div style="position:absolute;top:0;left:0;width:100%;height:100%;will-change:clip;user-select:none;-khtml-user-select:none;-moz-user-select:none;-webkit-user-select:none" data-rcs="clip-item"><img alt="New syntax highlighting" srcSet="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fnew.f1e91370.png&amp;w=1920&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fnew.f1e91370.png&amp;w=3840&amp;q=75 2x" src="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fnew.f1e91370.png&amp;w=3840&amp;q=75" width="1344" height="1084" decoding="async" data-nimg="1" loading="lazy" style="color:transparent;display:block;width:100%;height:100%;max-width:100%;box-sizing:border-box;object-fit:cover;object-position:center;background-size:cover;background-position:center;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http%3A//www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 8 6&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;1&#x27;/%3E%3C/filter%3E%3Cimage preserveAspectRatio=&#x27;none&#x27; filter=&#x27;url(%23b)&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; height=&#x27;100%25&#x27; width=&#x27;100%25&#x27; href=&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAABlBMVEUODhEXFhowa698AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGElEQVQImWNgZGRkZAADKMXAgBCBMdABAAHaAAzLNA8sAAAAAElFTkSuQmCC&#x27;/%3E%3C/svg%3E&quot;)"/></div><div style="position:absolute;top:0;width:100%;height:100%;pointer-events:none" data-rcs="handle-container"><div style="position:absolute;height:100%;transform:translateX(-50%);pointer-events:all"><div class="animate-[delay-appear_200ms_linear_200ms_forwards] text-teal-500 opacity-0 transition" style="display:flex;flex-direction:column;place-items:center;height:100%;cursor:ew-resize;pointer-events:none"><div class="__rcs-handle-line" style="flex-grow:1;height:100%;width:2px;background-color:currentColor;pointer-events:auto;box-shadow:0 0 7px rgba(0,0,0,.35)"></div><div class="__rcs-handle-button" style="display:grid;grid-auto-flow:column;gap:8px;place-content:center;flex-shrink:0;width:56px;height:56px;border-radius:50%;border-style:solid;border-width:2px;pointer-events:auto;backdrop-filter:blur(7px);-webkit-backdrop-filter:blur(7px);box-shadow:0 0 7px rgba(0,0,0,.35);border-color:currentcolor"><div style="width:0;height:0;border-top:8px solid transparent;border-right:10px solid;border-bottom:8px solid transparent"></div><div style="width:0;height:0;border-top:8px solid transparent;border-right:10px solid;border-bottom:8px solid transparent;transform:rotate(180deg)"></div></div><div class="__rcs-handle-line" style="flex-grow:1;height:100%;width:2px;background-color:currentColor;pointer-events:auto;box-shadow:0 0 7px rgba(0,0,0,.35)"></div></div></div></div></div>]]></content:encoded>
            <author>info@mskelton.dev (Mark Skelton)</author>
        </item>
        <item>
            <title><![CDATA[Embracing Shell Scripts]]></title>
            <link>https://mskelton.dev/blog/embracing-shell-scripts</link>
            <guid>https://mskelton.dev/blog/embracing-shell-scripts</guid>
            <pubDate>Sat, 17 Dec 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[In the world of modern editors and tools, shell scripting has become somewhat of a lost skill or a dark art. In this article, I'll show practical, real-world examples of shell scripts to encourage you to re-explore shell scripting to enhance your workflows and increase your productivity.]]></description>
            <content:encoded><![CDATA[<p>The year: 2022. The place: Southern Wisconsin. The scene: a programmer trying
his utmost to find the words to explain his passion for shell scripting and
automation. Okay, let me stop there before this article goes way off the deep
end of silliness. This isn’t Star Trek, and I’m nowhere near that cool. Yet, I’d
like to tell you about something I find very exciting, the world of shell
scripting and automation.</p>
<p>Before you click away and go back to coding in your editor with all its amazing
GUI tools (don’t worry, I’m not against modern editors, they are awesome), hear
me out for just a bit. As a developer, you’ve no doubt used your shell to some
degree. Perhaps cloning a git repository, navigating your directory structure,
or running the sketchy-looking command you found on StackOverflow that magically
fixes the issue your computer was having. However, behind the shell you use lays
a whole world of productivity improvements and automation you can tap into.</p>
<h2 id="whats-the-point-though"><a aria-hidden="true" tabindex="-1" href="#whats-the-point-though"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>What’s the point though?</h2>
<p>When I first started digging deeper into documentation surrounding shell script
in bash/zsh/fish, I found myself asking the question “what’s the point?” or
“what can I automate that actually helps my daily work?” So, my goal in this
article is going to be to share some of my favorite shell scripts and associated
workflow improvements to help inspire you to consider what you can build. I’m
not going to dive too deep into how every piece works, there are tons of
resources already about learning <code>bash</code> or your favorite shell scripting
language.</p>
<p>So, let’s dive in!</p>
<h2 id="printing-the-most-recent-commit-url"><a aria-hidden="true" tabindex="-1" href="#printing-the-most-recent-commit-url"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Printing the most recent commit URL</h2>
<p>From time to time, when discussing a PR with coworkers, I’ll commit and push a
change to GitHub, and then copy the URL of that commit to send them in Slack or
add to a comment thread in the pull request. Previously, I didn’t have a great
process to do this, often resulting in opening up my git graph in VS Code and
remembering what to click to copy the commit URL, or going into the branch in
GitHub to manually find the URL.</p>
<p>To simplify this, I created a <code>commit-url</code> script which will print the URL of
the latest commit in my repository. This makes it as simple as running
<code>commit-url | pbcopy</code> to print and then copy the commit URL to my clipboard to
send to my coworkers.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#565F89;font-style:italic"># Get the SHA (e.g. ) of the latest commit in the repository unless a SHA was</span></span>
<span class="line"><span style="color:#565F89;font-style:italic"># provided as an argument to this script.</span></span>
<span class="line"><span style="color:#A9B1D6">commit=</span><span style="color:#C0CAF5">${1</span><span style="color:#89DDFF">:-</span><span style="color:#C0CAF5">$(git rev-parse --short HEAD)}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#565F89;font-style:italic"># Read the repository base URL from the git config</span></span>
<span class="line"><span style="color:#A9B1D6">url=</span><span style="color:#89DDFF">$(</span><span style="color:#9ECE6A">git config --get remote.origin.url</span><span style="color:#89DDFF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#565F89;font-style:italic"># Take the git@hostname.com:account/repo.git format and turn it into</span></span>
<span class="line"><span style="color:#565F89;font-style:italic"># https://hostname.com/account/repo/commit/...</span></span>
<span class="line"><span style="color:#BB9AF7">if</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">[[</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">&quot;</span><span style="color:#C0CAF5">$url</span><span style="color:#89DDFF">&quot;</span><span style="color:#A9B1D6"> </span><span style="color:#BB9AF7">!=</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">&quot;</span><span style="color:#9ECE6A">https://</span><span style="color:#89DDFF">&quot;</span><span style="color:#89DDFF">*</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">]];</span><span style="color:#A9B1D6"> </span><span style="color:#BB9AF7">then</span></span>
<span class="line"><span style="color:#A9B1D6">	url=</span><span style="color:#89DDFF">$(</span><span style="color:#9ECE6A">echo </span><span style="color:#C0CAF5">$url</span><span style="color:#9ECE6A"> </span><span style="color:#89DDFF">|</span><span style="color:#9ECE6A"> sed </span><span style="color:#89DDFF">&#x27;</span><span style="color:#9ECE6A">s/\.git$//</span><span style="color:#89DDFF">&#x27;</span><span style="color:#9ECE6A"> </span><span style="color:#89DDFF">|</span><span style="color:#9ECE6A"> sed </span><span style="color:#89DDFF">&#x27;</span><span style="color:#9ECE6A">s/:/\//</span><span style="color:#89DDFF">&#x27;</span><span style="color:#9ECE6A"> </span><span style="color:#89DDFF">|</span><span style="color:#9ECE6A"> sed </span><span style="color:#89DDFF">&#x27;</span><span style="color:#9ECE6A">s/^git@/https:\/\//</span><span style="color:#89DDFF">&#x27;)</span></span>
<span class="line"><span style="color:#BB9AF7">fi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#2AC3DE">echo</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">&quot;</span><span style="color:#C0CAF5">$url</span><span style="color:#9ECE6A">/commit/</span><span style="color:#C0CAF5">$commit</span><span style="color:#89DDFF">&quot;</span></span>
<span class="line"></span></code></pre>
<h2 id="built-in-copying"><a aria-hidden="true" tabindex="-1" href="#built-in-copying"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Built-in copying</h2>
<p>This script works great and while it’s not something I have to use all the time,
it’s so nice to have it handy when I need it. However, it is a little bit of a
pain to have to always add <code>| pbcopy</code> when calling the script if I want to copy
it, so I started to employ a pattern with scripts like this one where I would
create an associated “helper” script that would be named the same with a <code>!</code> as
a postfix. This helper script would simply call the main script and pipe the
output through <code>pbcopy</code> automatically.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#A9B1D6">commit-url </span><span style="color:#C0CAF5">$1</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">|</span><span style="color:#A9B1D6"> pbcopy</span></span>
<span class="line"></span></code></pre>
<p>While it looks a little odd to have the exclamation point when running the
command (<code>commit-url!</code>), it’s nice that several of my scripts are complementary
in this way.</p>
<h2 id="view-packagejson-contents"><a aria-hidden="true" tabindex="-1" href="#view-packagejson-contents"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>View package.json contents</h2>
<p>This one might sound a little odd, but it’s actually quite handy when combined
with autocompletion. As a Node.js developer, I work with <code>package.json</code> files
all the time. When moving between projects, I don’t always remember what scripts
are available to start the project, run tests, etc. That’s where this script
comes in handy.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#565F89;font-style:italic"># Check if there is a package.json file in the current directory</span></span>
<span class="line"><span style="color:#BB9AF7">if</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">[[</span><span style="color:#A9B1D6"> </span><span style="color:#BB9AF7">-f</span><span style="color:#A9B1D6"> package.json </span><span style="color:#89DDFF">]];</span><span style="color:#A9B1D6"> </span><span style="color:#BB9AF7">then</span></span>
<span class="line"><span style="color:#89DDFF">  </span><span style="color:#565F89;font-style:italic"># Parse the package.json file with jq</span></span>
<span class="line"><span style="color:#A9B1D6">	jq </span><span style="color:#89DDFF">&quot;</span><span style="color:#9ECE6A">.</span><span style="color:#C0CAF5">$1</span><span style="color:#89DDFF">&quot;</span><span style="color:#A9B1D6"> package.json</span></span>
<span class="line"><span style="color:#BB9AF7">else</span></span>
<span class="line"><span style="color:#A9B1D6">	</span><span style="color:#2AC3DE">echo</span><span style="color:#A9B1D6"> -e </span><span style="color:#89DDFF">&quot;</span><span style="color:#9ECE6A">Error: Couldn&#x27;t find a package.json file in the current directory.</span><span style="color:#89DDFF">&quot;</span></span>
<span class="line"><span style="color:#BB9AF7">fi</span></span>
<span class="line"></span></code></pre>
<p>At its most simple level you can print the contents of the package.json file by
simply running <code>pkg</code>. However, if you add an argument you can drill down into a
specific section such as <code>pkg scripts</code> which would print only the scripts. Very
simple, yet very useful.</p>
<h2 id="finding-urls-in-text"><a aria-hidden="true" tabindex="-1" href="#finding-urls-in-text"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Finding URLs in text</h2>
<p>Sometimes, I have a piece of text that contains one or more URLs that I wish to
extract. With a few lines of bash, this is a very simple task.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#565F89;font-style:italic"># Loop through each line of the input stream</span></span>
<span class="line"><span style="color:#BB9AF7">while</span><span style="color:#A9B1D6"> IFS= </span><span style="color:#2AC3DE">read</span><span style="color:#A9B1D6"> line</span><span style="color:#89DDFF">;</span><span style="color:#A9B1D6"> </span><span style="color:#BB9AF7">do</span></span>
<span class="line"><span style="color:#89DDFF">  </span><span style="color:#565F89;font-style:italic"># Print URLs matching the regex pattern</span></span>
<span class="line"><span style="color:#A9B1D6">  </span><span style="color:#2AC3DE">echo</span><span style="color:#A9B1D6"> </span><span style="color:#C0CAF5">$line</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">|</span><span style="color:#A9B1D6"> grep -oE </span><span style="color:#89DDFF">&#x27;</span><span style="color:#9ECE6A">https?://\S+</span><span style="color:#89DDFF">&#x27;</span></span>
<span class="line"><span style="color:#BB9AF7">done</span></span>
<span class="line"></span></code></pre>
<p>Just like <code>commit-url</code>, I employ a similar concept where I can use <code>url!</code> to
automatically open the URLs found in the text.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#BB9AF7">while</span><span style="color:#A9B1D6"> IFS= </span><span style="color:#2AC3DE">read</span><span style="color:#A9B1D6"> line</span><span style="color:#89DDFF">;</span><span style="color:#A9B1D6"> </span><span style="color:#BB9AF7">do</span></span>
<span class="line"><span style="color:#A9B1D6">	</span><span style="color:#2AC3DE">echo</span><span style="color:#A9B1D6"> </span><span style="color:#C0CAF5">$line</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">|</span><span style="color:#A9B1D6"> url </span><span style="color:#89DDFF">|</span><span style="color:#A9B1D6"> xargs open</span></span>
<span class="line"><span style="color:#BB9AF7">done</span></span>
<span class="line"></span></code></pre>
<h2 id="sound-test"><a aria-hidden="true" tabindex="-1" href="#sound-test"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Sound test</h2>
<p>This one is really simple, and useful when setting up a new external device like
a speaker or headphones. Rather than opening YouTube or Spotify to see if sound
is working properly, run this script which I have named <code>ding</code> to send a simple
push notification with sound. This is exclusive to macOS, but the concept could
easily be ported to other operating systems.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#A9B1D6">osascript -e </span><span style="color:#89DDFF">&#x27;</span><span style="color:#9ECE6A">display notification &quot;Did you hear it?&quot; with title &quot;Sound test&quot; sound name &quot;Glass&quot;</span><span style="color:#89DDFF">&#x27;</span></span>
<span class="line"></span></code></pre>
<h2 id="wrapping-up"><a aria-hidden="true" tabindex="-1" href="#wrapping-up"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Wrapping up</h2>
<p>There is a lot more that could be said about shell scripting and bash, as well
as the myriad of other ways to automate your workflow (which I plan on writing
other posts about). I hope this article will inspire you to spend some time
exploring shell scripting to automate your workflows and improve your
productivity.</p>]]></content:encoded>
            <author>info@mskelton.dev (Mark Skelton)</author>
        </item>
        <item>
            <title><![CDATA[My Journey to Become a Staff Software Engineer]]></title>
            <link>https://mskelton.dev/blog/my-journey-to-become-a-staff-software-engineer</link>
            <guid>https://mskelton.dev/blog/my-journey-to-become-a-staff-software-engineer</guid>
            <pubDate>Tue, 01 Feb 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[A common question I hear from junior-level software engineers is what it takes to advance in their career as software engineers. In this article, I discuss my journey to becoming a staff software engineer and what I learned along the way.]]></description>
            <content:encoded><![CDATA[<p>This week, I begin my new position at <a href="https://www.widen.com">Widen</a> as a staff
software engineer with a focus on JavaScript engineering and developer
experience. As I reflected on my career journey and what I learned to make it to
this point, I wanted to share my journey and learnings to help other developers
advance their careers and become better software engineers. In this article,
I’ll outline the 9 most important lessons I learned in the last 5 years I’ve
spent as a software engineer.</p>
<h2 id="tldr"><a aria-hidden="true" tabindex="-1" href="#tldr"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>TLDR</h2>
<ol>
<li><a href="#try-things-out">Try Things Out</a></li>
<li><a href="#teach-what-you-learn">Teach What You Learn</a></li>
<li><a href="#read-documentation">Read Documentation</a></li>
<li><a href="#get-good-at-google">Get Good at Google</a></li>
<li><a href="#relentlessly-improve-efficiency">Relentlessly Improve Efficiency</a></li>
<li><a href="#chase-your-passion">Chase Your Passion</a></li>
<li><a href="#stay-humble">Stay Humble</a></li>
<li><a href="#embrace-your-teams-norms">Embrace your team’s norms</a></li>
<li><a href="#challenge-the-status-quo">Challenge the Status Quo</a></li>
</ol>
<h2 id="try-things-out"><a aria-hidden="true" tabindex="-1" href="#try-things-out"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Try Things Out</h2>
<p>One of the best ways to learn something is just trying it out to see what you
learn. So much of what I have learned is a result of experimenting with new
languages and frameworks; trying new ways of architecting applications; and
taking inspiration from other developers and applying it to your own projects.
The key here is “trying”. You can learn so much if you give things a try, even
if you decide you didn’t like it and you throw it away. I’ve started so many
projects and never completed them because completing them wasn’t the point,
rather I was having fun trying new approaches to problems that I’ve solved many
times to see if I can find a better way.</p>
<h2 id="read-documentation"><a aria-hidden="true" tabindex="-1" href="#read-documentation"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Read Documentation</h2>
<p>It often shocks me how often I see engineers asking questions or failing to
understand concepts when there are so many amazing sources of documentation that
clearly explain these things. You can learn so much by reading documentation,
even if you aren’t looking for a specific answer to a question. In fact, this is
where some of the best learnings come as you discover better ways of doing
something that you may not have known were possible!</p>
<p>Now, I know what you are thinking, reading documentation sounds boring. That can
certainly be the case, so set yourself small and attainable goals so you don’t
burn out from reading too much documentation. For the past year, I’ve set a goal
to read one page of documentation (or 5 minutes worth) every workday. Five
minutes is such a small commitment, but you’d be surprised how much
documentation you can read in a year when you do it every day!</p>
<h2 id="get-good-at-google"><a aria-hidden="true" tabindex="-1" href="#get-good-at-google"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Get Good at Google</h2>
<p>This might sound silly, especially when many companies (including mine) don’t
allow using Google during coding interviews, but learning how to research
problems is a very important skill to becoming a more effective engineer. I
frequently see junior-level developers who when faced with a problem they can’t
figure out, will quickly go to a more experienced engineer to ask why their code
isn’t working.</p>
<p>While I always encourage reaching out to more experienced developers for help,
overusing those resources can do two things. First, it limits the learning
potential as getting a quick answer is quickly forgotten while taking the time
to research a problem is often better retained. Second, if you overload senior
engineers with questions, they will eventually get frustrated that you aren’t
taking the time yourself to research the issue. Senior engineers want to see
junior engineers grow, and learning how to research and discover solutions is
one of the foremost ways you can do this.</p>
<p>To be clear, I’m not suggesting that you don’t ask <strong>any</strong> questions to senior
engineers, rather I’m suggesting to spend more time learning and researching on
your own before you ask questions. There will always be those tough questions
that you just can’t figure out, and that’s a great time to get some help from a
more experienced engineer. Eventually, when you become the senior engineer,
people will be asking you questions and you may no longer have a more senior
engineer to lean on, so practice these skills now!</p>
<h2 id="teach-what-you-learn"><a aria-hidden="true" tabindex="-1" href="#teach-what-you-learn"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Teach What You Learn</h2>
<p>As you learn and grow as a software engineer, one of the best ways to reinforce
and deepen your knowledge is by teaching others what you have learned. This is
not anything new that other people haven’t already figured out, but it certainly
is true. When I am preparing to teach a concept, even if it is a simple Slack
message to my teammates, it introduces an opportunity for me to ensure my
knowledge of the subject is complete and accurate. The last thing I want to do
is make and spread false claims or information, so as a result teaching becomes
an opportunity to ensure my knowledge is accurate, which often brings with it
new information I may not have known before.</p>
<p>Keep in mind, teaching doesn’t need to be a lecture in front of your whole
engineering department at work. In fact, it doesn’t even have to be a speech, it
can be a simple Slack message with a new tip you learned or a mention of a more
efficient process on a Zoom call. These methods of teaching require far less
preparation while still resulting in deepening your knowledge and helping your
coworkers to also improve their skills.</p>
<h2 id="relentlessly-improve-efficiency"><a aria-hidden="true" tabindex="-1" href="#relentlessly-improve-efficiency"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Relentlessly Improve Efficiency</h2>
<p>As you advance to higher levels of software engineering, you will solve more
complex problems that require more time and mental energy. As you do, you will
be limited by two factors: how quickly you can develop solutions to these
problems and how quickly you can implement these solutions. Improving the
efficiency of developing solutions generally comes with time and experience
making it more difficult to artificially speed up, but the opposite is true of
improving the efficiency of implementing solutions.</p>
<p>While certainly not the only factor in efficiency, how you type and your typing
speed are important factors to efficiency. While software engineers do not
simply type for 8 hours straight every day, we do type a lot, so improving your
typing skills will have a positive impact on your overall efficiency. Not only
that, but if you improve not only your typing speed but also your typing method
you will find yourself wasting less mental energy thinking about typing, and
instead you can use that energy to think about the problem you are trying to
solve.</p>
<p>There are so many other ways to improve efficiency, but rather than making this
section huge, here are some of my top tips.</p>
<ul>
<li>Learn keyboard shortcuts to reduce time wasted moving between your mouse and
keyboard.</li>
<li>Prefer CLIs over GUIs. While GUIs are nicer to look at and use, CLIs are often
more efficient. For example, with some configuration, I can manage my Git
repositories far quicker via the command line than I can via VS Code’s
built-in Git client.</li>
<li>Automate as much as you can. Setup a GitHub action to automatically update
dependencies every other week, create lint rules to enforce coding standards,
or create recurring reminders of common tasks. Anything you can do to reduce
what you have to remember and do will improve your efficiency.</li>
<li>For macOS users, replace Spotlight with <a href="https://www.raycast.com">Raycast</a> or
<a href="https://www.alfredapp.com">Alfred</a> which both provide more functionality and
offer means of customizing with extensions or workflows to automate common
tasks.</li>
</ul>
<h2 id="chase-your-passion"><a aria-hidden="true" tabindex="-1" href="#chase-your-passion"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Chase Your Passion</h2>
<p>The world of software engineering is vast and varied. You can dive into
low-level programming with Rust and C, data science with Python and R, web
application development with JavaScript and TypeScript, and so many more areas.
Due to the wide breadth of the space, it is not feasible to truly excel in every
area and so it is important to specialize in a subset of the overall field based
on what you are passionate about. For me, that is web JavaScript engineering and
developer experience, but what is it for you?</p>
<p>As you grow, explore different areas to find where your passion lies so you can
hone your skills and find more enjoyment in what you do every day. Don’t just
pick the most loved language on the StackOverflow annual survey or the language
that pays the most, find what you love doing, and do that. If possible, use time
outside of work to build side projects either to explore new technologies or
deepen your knowledge of existing technologies you use.</p>
<h2 id="stay-humble"><a aria-hidden="true" tabindex="-1" href="#stay-humble"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Stay Humble</h2>
<p>The more experience you get as a software engineer, the easier it will become to
be prideful of your knowledge, position, experience, salary, you name it. Fight
this and stay humble. Pride will not only cause you to lose respect from your
coworkers, which is vitally important as a senior engineer and a leader, but it
will also stunt your continued growth and learning. If you think you have it all
figured out and know everything you need to know, you will stop learning and
stagnate at your current level of knowledge. However, if you remain humble, and
remember that not only do you have much to learn but also that every one of your
coworkers, regardless of seniority, can teach you something, you will unlock the
door to continued growth and learning.</p>
<h2 id="embrace-your-teams-norms"><a aria-hidden="true" tabindex="-1" href="#embrace-your-teams-norms"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Embrace Your Team’s Norms</h2>
<p>Since starting at Widen 3 years ago, I have moved around to different teams
quite a bit. During some of the earlier transitions, I had a tendency to come to
the team making all sorts of suggestions based on “what I did on my other team”
or “what I did at my last job”. While suggestions like this are not necessarily
bad, they make it significantly more difficult to build respect with your team
as they see your suggestions as a challenge to how they work, what they have
built, etc. This can cause others on the team to quickly become defensive rather
than being open to your ideas.</p>
<p>What I’ve found to be much more effective is to embrace the norms of a team when
joining them. This allows you to more easily see why they do what they do
including the benefits of their process and approaches. As you embrace your
team’s norms, you will gain their respect far quicker which in turn will give
you the ability to suggest improvements that will likely be taken much better by
your team. Not only that, but often you will find that some of the things that
were so important when you first joined might not be as important as you think
after spending a little time on your new team.</p>
<h2 id="challenge-the-status-quo"><a aria-hidden="true" tabindex="-1" href="#challenge-the-status-quo"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Challenge the Status Quo</h2>
<p>The final lesson I’ll share in this article is to challenge the status quo.
Being a highly effective software engineer involves challenging processes and
decisions rather than blindly following the direction set by others. While this
may sound contrary to my last point and very rebellious, when done properly, it
can have a great positive impact. The key is knowing what to challenge. For
example, at my work, UX decisions are something I often challenge. Asking why a
design was created the way it was, suggesting simpler alternatives, or
explaining technical reasons why a design should be reviewed. Be careful though,
as your goal should not be to challenge for the sake of challenge, rather your
goal should be to make the best possible software for your customers. If you are
careful in how you challenge the status quo, you will likely find that others on
your team appreciate your challenges and feedback.</p>
<p>Thanks for reading! I hope you have found this article helpful and if you have
any comments, feel free to share them with me on Twitter or GitHub!</p>]]></content:encoded>
            <author>info@mskelton.dev (Mark Skelton)</author>
        </item>
        <item>
            <title><![CDATA[Using Yarn Constraints]]></title>
            <link>https://mskelton.dev/blog/using-yarn-constraints</link>
            <guid>https://mskelton.dev/blog/using-yarn-constraints</guid>
            <pubDate>Sun, 06 Dec 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[Yarn 2 introduced a new feature referred to as "constraints" to help you manage packages in your monorepo. In this article, I explain how constraints work and show you how you can use them to enforce consistency in your monorepo.]]></description>
            <content:encoded><![CDATA[<p>Yarn 2 (aka berry) introduced a new feature referred to as “constraints” which
allow developers to enforce rules for dependencies or manifest fields for some
or all workspaces in a project. While constraints are still experimental and
community examples of using them are a bit sparse, they are a very powerful tool
to help you more easily manage your project.</p>
<h2 id="what-are-yarn-constraints"><a aria-hidden="true" tabindex="-1" href="#what-are-yarn-constraints"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>What Are Yarn Constraints?</h2>
<p>As previously mentioned,
<a href="https://yarnpkg.com/features/constraints">Yarn constraints</a> allow you to
enforce rules for your dependencies or manifest fields in your project. While
they could be used for a project with a single workspace, their value comes in
when used on projects with multiple workspaces such as a component library.
Constraints are written in Prolog which, although it has a learning curve,
allows writing powerful rules in just a few short lines.</p>
<h2 id="lets-see-an-example"><a aria-hidden="true" tabindex="-1" href="#lets-see-an-example"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Let’s See An Example</h2>
<p>Alright, let’s get down to business and look at an example of a constraint. For
the rest of this article, let’s assume that we are working on an open-source
component library containing 10 packages. This would thus have 11 total
“workspaces” as each package is a workspace plus the root workspace which
contains the <code>workspaces</code> key in the package.json file.</p>
<p>Since our example project is open source, we want to make sure all of our
packages have a <code>license</code> field in their manifest files (package.json). This
would look something like this.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#7AA2F7">gen_enforced_field</span><span style="color:#9ABDF5">(</span><span style="color:#E0AF68">WorkspaceCwd</span><span style="color:#A9B1D6">, &#x27;license&#x27;, &#x27;ISC&#x27;</span><span style="color:#9ABDF5">)</span><span style="color:#BB9AF7">.</span></span>
<span class="line"></span></code></pre>
<p><em>All the examples in this article can be viewed on the
<a href="https://github.com/mskelton/yarn-constraints-example">accompanying GitHub repo</a>
I created for this article.</em></p>
<p>This will instruct Yarn that we want to enforce a constraint on all of our
workspaces (including the root) where each workspace should contain a <code>license</code>
field with the value of <code>ISC</code>. We can check to see if our constraints are met by
running the <code>yarn constraints</code> command.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#a9b1d6">$ yarn constraints</span></span>
<span class="line"><span style="color:#a9b1d6">➤ YN0037: package-a must have a field license set to &quot;ISC&quot;, but doesn&#x27;t</span></span>
<span class="line"><span style="color:#a9b1d6">➤ YN0038: package-b must have a field license set to &quot;ISC&quot;, but is set to &quot;MIT&quot; instead</span></span>
<span class="line"><span style="color:#a9b1d6">➤ YN0000: Failed with errors in 0s 29ms</span></span>
<span class="line"><span style="color:#a9b1d6"></span></span></code></pre>
<p>As you can see from the output, Yarn warned us that package-a does not have a
<code>license</code> field in it’s manifest and package-b has an incorrect value for the
<code>license</code> field. To fix these issues, we can add the <code>--fix</code> argument to the
command which will instruct Yarn to fix the issues for us if possible.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#a9b1d6">$ yarn constraints --fix</span></span>
<span class="line"><span style="color:#a9b1d6">➤ YN0000: Done in 0s 43ms</span></span>
<span class="line"><span style="color:#a9b1d6"></span></span></code></pre>
<p>The errors are now gone, and if we look at the changed files in Git, we will see
that the manifest file for package-a and package-b have been updated.</p>
<p>Now that we’ve seen what Yarn constraints look like and how to check/fix them,
let’s look at a number of real world use cases where you might want to use
constraints to enforce rules for your workspaces.</p>
<h2 id="use-case-enforce-homepage-url"><a aria-hidden="true" tabindex="-1" href="#use-case-enforce-homepage-url"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Use Case: Enforce Homepage URL</h2>
<p>Continuing with our hypothetical component library, we probably want to include
a <code>homepage</code> field in the manifest of each workspace so that users can use the
<code>npm docs</code> command to open the readme for each of our packages. This constraint
isn’t quite as simple as the last since the homepage of each workspace will be
different.</p>
<p>When writing more complex constraints like this, I like to start with a basic
constraint and then add the complexity bit by bit. So, I’ll start with something
similar to our license constraint.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#7AA2F7">gen_enforced_field</span><span style="color:#9ABDF5">(</span><span style="color:#E0AF68">WorkspaceCwd</span><span style="color:#A9B1D6">, &#x27;homepage&#x27;, &#x27;something&#x27;</span><span style="color:#9ABDF5">)</span><span style="color:#BB9AF7">.</span></span>
<span class="line"></span></code></pre>
<p>Okay, good start. Now I have a constraint that will add a <code>homepage</code> field to
each workspace. There are two problems that I’ll need to address:</p>
<ol>
<li>This constraint will also be enforced for the root workspace which we don’t
want.</li>
<li>The homepage URL isn’t correct.</li>
</ol>
<p>Let’s start with the first issue. We need to instruct Yarn not to enforce the
constraint for the root workspace. There are a number of ways you could do this,
but the approach I like to take looks something like this.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#7AA2F7">gen_enforced_field</span><span style="color:#9ABDF5">(</span><span style="color:#E0AF68">WorkspaceCwd</span><span style="color:#A9B1D6">, &#x27;homepage&#x27;, &#x27;something&#x27;</span><span style="color:#9ABDF5">)</span><span style="color:#A9B1D6"> </span><span style="color:#BB9AF7">:-</span></span>
<span class="line"><span style="color:#A9B1D6">  workspace_field(</span><span style="color:#E0AF68">WorkspaceCwd</span><span style="color:#A9B1D6">, &#x27;version&#x27;, </span><span style="color:#F7768E">_</span><span style="color:#A9B1D6">)</span><span style="color:#BB9AF7">.</span></span>
<span class="line"></span></code></pre>
<h3 id="aside-about-syntax"><a aria-hidden="true" tabindex="-1" href="#aside-about-syntax"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Aside about syntax</h3>
<p>Before I explain the code block above, I should pause for a moment to explain
some of the syntax in the previous code block and the mental model you should
use when reading and writing Yarn constraints.</p>
<p>In Prolog, we use “rules” to create conditional statements that will either be
true or false. Rules contain a “head” section, and a “body” section where the
head will be true if the body is true. For example, the following rule would be
read as “X is a mortal if X is human” with <code>mortal(X)</code> as the “head” and
<code>human(X)</code> as the “body”.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#7AA2F7">mortal</span><span style="color:#9ABDF5">(</span><span style="color:#E0AF68">X</span><span style="color:#9ABDF5">)</span><span style="color:#A9B1D6"> </span><span style="color:#BB9AF7">:-</span><span style="color:#A9B1D6"> human(</span><span style="color:#E0AF68">X</span><span style="color:#A9B1D6">)</span><span style="color:#BB9AF7">.</span></span>
<span class="line"></span></code></pre>
<p>When writing Yarn constraints, we create rules which when true instruct Yarn to
enforce the constraint for the given workspace. This does not necessarily mean
that the constraint is met, simply that Yarn should enforce it when we run yarn
constraints. This point is important to remember.</p>
<blockquote>
<p>The rules we create don’t indicate whether constraint has been met, rather it
indicates that the constraint should be enforced.</p>
</blockquote>
<p>The last thing to note about Prolog syntax is that rules without a body are
always true. Prolog calls these rules “facts” and our previous example of
enforcing the license field is an example of a fact. Facts are just syntactic
sugar meaning that the following two lines give the same result.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#7AA2F7">gen_enforced_field</span><span style="color:#9ABDF5">(</span><span style="color:#E0AF68">WorkspaceCwd</span><span style="color:#A9B1D6">, &#x27;license&#x27;, &#x27;ISC&#x27;</span><span style="color:#9ABDF5">)</span><span style="color:#A9B1D6"> </span><span style="color:#BB9AF7">:-</span><span style="color:#A9B1D6"> true</span><span style="color:#BB9AF7">.</span></span>
<span class="line"><span style="color:#7AA2F7">gen_enforced_field</span><span style="color:#9ABDF5">(</span><span style="color:#E0AF68">WorkspaceCwd</span><span style="color:#A9B1D6">, &#x27;license&#x27;, &#x27;ISC&#x27;</span><span style="color:#9ABDF5">)</span><span style="color:#BB9AF7">.</span></span>
<span class="line"></span></code></pre>
<h3 id="enough-syntax-back-to-work"><a aria-hidden="true" tabindex="-1" href="#enough-syntax-back-to-work"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Enough syntax, back to work</h3>
<p>Okay, back to our homepage constraint example. We left off with the following
block of code, but I didn’t explain why I added the <code>workspace_field</code> portion to
the body of the rule.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#7AA2F7">gen_enforced_field</span><span style="color:#9ABDF5">(</span><span style="color:#E0AF68">WorkspaceCwd</span><span style="color:#A9B1D6">, &#x27;homepage&#x27;, &#x27;something&#x27;</span><span style="color:#9ABDF5">)</span><span style="color:#A9B1D6"> </span><span style="color:#BB9AF7">:-</span></span>
<span class="line"><span style="color:#A9B1D6">  workspace_field(</span><span style="color:#E0AF68">WorkspaceCwd</span><span style="color:#A9B1D6">, &#x27;version&#x27;, </span><span style="color:#F7768E">_</span><span style="color:#A9B1D6">)</span><span style="color:#BB9AF7">.</span></span>
<span class="line"></span></code></pre>
<p>This change resolved the first of the two issues where the constraint was being
enforced for the root workspace. By using the <code>workspace_field</code> rule provided by
Yarn, our rule will now return true for all workspaces whose manifest has a
<code>version</code> property set to any value (underscores in Prolog indicate any value).
Since our root workspace does not have a <code>version</code> property in its manifest, the
constraint will not be enforced.</p>
<p>Next, we need to set the correct homepage URL and to do that, we can change our
constraint to the following.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#7AA2F7">gen_enforced_field</span><span style="color:#9ABDF5">(</span><span style="color:#E0AF68">WorkspaceCwd</span><span style="color:#A9B1D6">, &#x27;homepage&#x27;, </span><span style="color:#E0AF68">Homepage</span><span style="color:#9ABDF5">)</span><span style="color:#A9B1D6"> </span><span style="color:#BB9AF7">:-</span></span>
<span class="line"><span style="color:#A9B1D6">  workspace_field(</span><span style="color:#E0AF68">WorkspaceCwd</span><span style="color:#A9B1D6">, &#x27;version&#x27;, </span><span style="color:#F7768E">_</span><span style="color:#A9B1D6">),</span></span>
<span class="line"><span style="color:#A9B1D6">  </span><span style="color:#2AC3DE">atom_concat</span><span style="color:#A9B1D6">(&#x27;https://github.com/mskelton/yarn-constraints-example/tree/main/&#x27;, </span><span style="color:#E0AF68">WorkspaceCwd</span><span style="color:#A9B1D6">, </span><span style="color:#E0AF68">Homepage</span><span style="color:#A9B1D6">)</span><span style="color:#BB9AF7">.</span></span>
<span class="line"></span></code></pre>
<p>To get the correct homepage URL for each workspace, we use Prolog’s built-in
<code>atom_concat</code> predicate to concatenate the GitHub URL and the workspace
directory into a variable called <code>Homepage</code>. We then can use this variable as
the third argument to <code>gen_enforced_field</code> so Yarn will enforce the correct
homepage URL in each workspace. If we check our constraints, we will likely see
something like this.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#a9b1d6">$ yarn constraints</span></span>
<span class="line"><span style="color:#a9b1d6">➤ YN0037: package-a must have a field homepage set to &quot;https://github.com/mskelton/yarn-constraints-example/tree/main/packages/package-a&quot;, but doesn&#x27;t</span></span>
<span class="line"><span style="color:#a9b1d6">➤ YN0037: package-b must have a field homepage set to &quot;https://github.com/mskelton/yarn-constraints-example/tree/main/packages/package-b&quot;, but doesn&#x27;t</span></span>
<span class="line"><span style="color:#a9b1d6">➤ YN0000: Failed with errors in 0s 22ms</span></span>
<span class="line"><span style="color:#a9b1d6"></span></span></code></pre>
<p><em>This constraint is also auto-fixable when you run <code>yarn constraints --fix</code>.</em></p>
<h2 id="use-case-ensuring-a-dependency-is-a-peer-dependency"><a aria-hidden="true" tabindex="-1" href="#use-case-ensuring-a-dependency-is-a-peer-dependency"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Use Case: Ensuring a Dependency Is a Peer Dependency</h2>
<p>So, we’ve been using the example of a component library to demonstrate
constraints, so let’s extend the example to say that we are building a React
component library. When building React component packages, the <code>react</code>
dependency should be a peer dependency, not a regular dependency. This is a
perfect opportunity to add a constraint to enforce this rule in all of our
packages. This constraint would look like this.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#7AA2F7">gen_enforced_dependency</span><span style="color:#9ABDF5">(</span><span style="color:#E0AF68">WorkspaceCwd</span><span style="color:#A9B1D6">, &#x27;react&#x27;, null, dependencies</span><span style="color:#9ABDF5">)</span><span style="color:#A9B1D6"> </span><span style="color:#BB9AF7">:-</span></span>
<span class="line"><span style="color:#A9B1D6">  workspace_field(</span><span style="color:#E0AF68">WorkspaceCwd</span><span style="color:#A9B1D6">, &#x27;version&#x27;, </span><span style="color:#F7768E">_</span><span style="color:#A9B1D6">)</span><span style="color:#BB9AF7">.</span></span>
<span class="line"></span></code></pre>
<p>As you can see, instead of creating a <code>gen_enforced_field</code> rule, we are creating
a <code>gen_enforced_dependency</code> rule. Similar to our previous rules, we only want to
run this for published packages, so we ignore the root workspace using our
version check trick. For the workspaces where we enforce this constraint, Yarn
will ensure the <code>react</code> is not present in the <code>dependencies</code> block of the
manifest. If it is, we will get the following error.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#a9b1d6">$ yarn constraints</span></span>
<span class="line"><span style="color:#a9b1d6">➤ YN0025: package-a has an extraneous dependency on react (in dependencies)</span></span>
<span class="line"><span style="color:#a9b1d6">➤ YN0000: Failed with errors in 0s 20ms</span></span>
<span class="line"><span style="color:#a9b1d6"></span></span></code></pre>
<p>As we can see in the message, our newly created constraint prevents us from
using <code>react</code> as a regular dependency.</p>
<h2 id="wrapping-it-up"><a aria-hidden="true" tabindex="-1" href="#wrapping-it-up"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Wrapping It Up</h2>
<p>That was a lot for a single article! I hope this article has helped you to
understand what constraints are, when you might want to use them, and how to
build them. There is definitely a learning curve to constraints, but my best
advice is to just try it out for a while and see what you come up with! Whether
you pull inspiration from the constraints I wrote here or come up with your own
ideas of what constraints to create, I encourage you to give constraints a try
on one of your projects.</p>
<p><em>Goodbye and God bless!</em></p>]]></content:encoded>
            <author>info@mskelton.dev (Mark Skelton)</author>
        </item>
        <item>
            <title><![CDATA[Automating npm Package Releases]]></title>
            <link>https://mskelton.dev/blog/automating-npm-package-releases</link>
            <guid>https://mskelton.dev/blog/automating-npm-package-releases</guid>
            <pubDate>Mon, 25 May 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[Releasing npm packages can be a challenge. There are often many steps in the process and forgetting a step can result in a package being released incorrectly. In this article, I will show how to implement semantic-release in your project to fully automate your npm package releases.]]></description>
            <content:encoded><![CDATA[<p>semantic-release is a tool which fully automates the process of releasing your
code to the world. It determines the next version based on the commit messages
(e.g. <code>fix</code>, <code>feat</code>) giving you full control over the next version but still
automating the release process. This short article shows how to setup
semantic-release for an npm package using GitHub Actions.</p>
<p>First, create a GitHub Action which calls <code>npx semantic-release</code> (or
<code>yarn semantic-release</code> if you use Yarn). This should be run after any other
pre-release steps such as <code>npm run build</code> and <code>npm test</code>.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#F7768E">name</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">Release</span></span>
<span class="line"><span style="color:#FF9E64">on</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">[</span><span style="color:#9ECE6A">push</span><span style="color:#89DDFF">]</span></span>
<span class="line"><span style="color:#F7768E">jobs</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">  </span><span style="color:#F7768E">release</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#F7768E">runs-on</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">ubuntu-latest</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#F7768E">steps</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">uses</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">actions/checkout@v3</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">run</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">npm ci</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">run</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">npx semantic-release</span></span>
<span class="line"><span style="color:#A9B1D6">        </span><span style="color:#F7768E">env</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">          </span><span style="color:#F7768E">GITHUB_TOKEN</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">${{ secrets.GITHUB_TOKEN }}</span></span>
<span class="line"><span style="color:#A9B1D6">          </span><span style="color:#F7768E">NPM_TOKEN</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">${{ secrets.NPM_TOKEN }}</span></span>
<span class="line"></span></code></pre>
<p>Next, update your package changelog to indicate that change notes can be viewed
on the releases tab.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#89DDFF;font-style:italic">#</span><span style="color:#9AA5CE"> </span><span style="color:#89DDFF;font-style:italic">Changelog</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9AA5CE">The changelog is automatically updated using</span></span>
<span class="line"><span style="color:#89DDFF">[</span><span style="color:#73DACA">semantic-release</span><span style="color:#89DDFF">](</span><span style="color:#73DACA;font-style:italic">https://github.com/semantic-release/semantic-release</span><span style="color:#89DDFF">)</span><span style="color:#9AA5CE">. You</span></span>
<span class="line"><span style="color:#9AA5CE">can see it on the </span><span style="color:#89DDFF">[</span><span style="color:#73DACA">releases page</span><span style="color:#89DDFF">](</span><span style="color:#73DACA;font-style:italic">../../releases</span><span style="color:#89DDFF">)</span><span style="color:#9AA5CE">.</span></span>
<span class="line"></span></code></pre>
<p>Finally, update the version in your package.json to something that indicates
your package is versioned using semantic release.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#89DDFF">&quot;</span><span style="color:#9ECE6A">version</span><span style="color:#89DDFF">&quot;</span><span style="color:#A9B1D6">: </span><span style="color:#89DDFF">&quot;</span><span style="color:#9ECE6A">0.0.0-semantically-released</span><span style="color:#89DDFF">&quot;</span></span>
<span class="line"></span></code></pre>
<p>That’s it! Your package is now being automatically released via
semantic-release!</p>
<p><em>For more details, checkout the
<a href="https://github.com/semantic-release/semantic-release/blob/master/docs/recipes/github-actions.md#using-semantic-release-with-github-actions">semantic-release docs</a>.</em></p>]]></content:encoded>
            <author>info@mskelton.dev (Mark Skelton)</author>
        </item>
        <item>
            <title><![CDATA[Auto Formatting Code Using Prettier and GitHub Actions]]></title>
            <link>https://mskelton.dev/blog/auto-formatting-code-using-prettier-and-github-actions</link>
            <guid>https://mskelton.dev/blog/auto-formatting-code-using-prettier-and-github-actions</guid>
            <pubDate>Sat, 11 Apr 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[Enforcing consistent code formatting in your repositories with Prettier is great, but it can easily result in a less than ideal developer experience. In this article, I discuss how to leverage GitHub Actions to automate code formatting without requiring any additional steps from developers.]]></description>
            <content:encoded><![CDATA[<p>Prettier is a very popular code formatter which uses very opinionated but
sensible styles to format your code and prevent the ongoing debates about code
styles. When implementing Prettier into a project, the typical approach is to
setup a pre-commit hook using a tool such as
<a href="https://github.com/okonet/lint-staged">lint-staged</a> which will run Prettier on
your staged files prior to committing. While this works well in most cases,
there are a number of challenges with this approach.</p>
<ol>
<li>Non-staged files are not formatted. When changes are made to Prettier
configuration or Prettier is updated, untouched files will not be formatted
unless you manually run Prettier.</li>
<li>Pre-commit steps can be skipped. Running <code>git commit --no-verify</code> will commit
code without running pre-commit hooks which can result in files not being
formatted.</li>
<li>Pre-commit steps are slow. Running tasks like Prettier during pre-commit adds
additional time when committing files due to Prettier having to format each
file that is staged.</li>
</ol>
<h2 id="finding-a-better-way"><a aria-hidden="true" tabindex="-1" href="#finding-a-better-way"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Finding a Better Way</h2>
<p>Recently, a few of my coworkers implemented a tool called
<a href="https://github.com/diffplug/spotless">Spotless</a> into a number of projects to
automatically format Java code in our CI pipeline. I was quite intrigued by the
concept of automatically formatting code in CI that I pondered if a similar
process could be done using Prettier and GitHub Actions for JavaScript projects.
<em>Spoiler alert, it works!</em></p>
<p>After a few Google searches, I came across
<a href="https://github.com/creyD/prettier_action">GitHub Prettier Action</a> which formats
your code using Prettier and commits any changes files when finished. While this
looked like it would be the solution, it doesn’t use the version of Prettier
specified in your dependencies meaning that local formatting changes applied by
your editor or by running Prettier manually could get changed by the CI build if
the versions differed. While this could be resolved by always keeping the
version of Prettier in your npm dependencies and the GitHub action in sync, this
adds extra work that needs to be done when updating dependencies.</p>
<p>So, while the Prettier Action is not the best solution, there is another
solution that is just as easy to implement! This solution utilizes the
<a href="https://github.com/stefanzweifel/git-auto-commit-action">git-auto-commit-action</a>
alongside whatever formatting script you have in your repository. For example,
my repository has the following script to format using Prettier.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#89DDFF">&quot;</span><span style="color:#9ECE6A">format</span><span style="color:#89DDFF">&quot;</span><span style="color:#A9B1D6">: </span><span style="color:#89DDFF">&quot;</span><span style="color:#9ECE6A">prettier --write .</span><span style="color:#89DDFF">&quot;</span></span>
<span class="line"></span></code></pre>
<p>To setup the GitHub action, all we need to do is install our dependencies (e.g.
<code>npm ci</code>), run our format script (e.g. <code>npm run format</code>), and then commit any
changes if necessary.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#F7768E">name</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">Format</span></span>
<span class="line"><span style="color:#FF9E64">on</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">  </span><span style="color:#F7768E">pull_request</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#F7768E">branches</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">[</span><span style="color:#9ECE6A">main</span><span style="color:#89DDFF">]</span></span>
<span class="line"><span style="color:#F7768E">jobs</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">  </span><span style="color:#F7768E">format</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#F7768E">runs-on</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">ubuntu-latest</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#F7768E">steps</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">uses</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">actions/checkout@v3</span></span>
<span class="line"><span style="color:#A9B1D6">        </span><span style="color:#F7768E">with</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">          </span><span style="color:#F7768E">ref</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">${{ github.head_ref }}</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">uses</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">actions/setup-node@v3</span></span>
<span class="line"><span style="color:#A9B1D6">        </span><span style="color:#F7768E">with</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">          </span><span style="color:#F7768E">node-version</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">&quot;</span><span style="color:#9ECE6A">16.x</span><span style="color:#89DDFF">&quot;</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">run</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">npm ci</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">run</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">npm run format</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">name</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">Commit changes</span></span>
<span class="line"><span style="color:#A9B1D6">        </span><span style="color:#F7768E">uses</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">stefanzweifel/git-auto-commit-action@v4</span></span>
<span class="line"><span style="color:#A9B1D6">        </span><span style="color:#F7768E">with</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">          </span><span style="color:#F7768E">commit_message</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">Apply formatting changes</span></span>
<span class="line"><span style="color:#A9B1D6">          </span><span style="color:#F7768E">branch</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">${{ github.head_ref }}</span></span>
<span class="line"></span></code></pre>
<h2 id="conclusion"><a aria-hidden="true" tabindex="-1" href="#conclusion"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Conclusion</h2>
<p>By utilizing GitHub Actions for automatically formatting with Prettier, we were
able to eliminate all three issues described at the beginning of this article.
While the example I showed only performed formatting with Prettier, you could
also run ESLint, stylelint, or any other formatting tool you use as part of the
GitHub action!</p>
<p>If you are interested in the source code for this article, check out the
<a href="https://github.com/mskelton/prettier-formatting-example">example repository</a> I
put together. God bless and happy coding!</p>]]></content:encoded>
            <author>info@mskelton.dev (Mark Skelton)</author>
        </item>
        <item>
            <title><![CDATA[Conquering Derived State]]></title>
            <link>https://mskelton.dev/blog/conquering-derived-state</link>
            <guid>https://mskelton.dev/blog/conquering-derived-state</guid>
            <pubDate>Fri, 03 Apr 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[Derived state in React is generally considered to be an anti-pattern that should be avoided. In this article, I show how to recognize derived state in your components and alternative ways to write your components to avoid using derived state.]]></description>
            <content:encoded><![CDATA[<p>A couple weeks ago, my fellow front-end developers at
<a href="https://www.widen.com">Widen</a> had a conversation regarding one of our shared
React components which we were struggling to implement in one of our
applications. While most React components are fully controlled (via props) or
fully uncontrolled (internal state), this component used what is known as
“derived state” which is internal state that is controlled to some degree by
props. Although derived state might seem like a good solution, it often causes
many more problems than it attempts to solve.</p>
<p>My goal in this article is not to convince you that derived state should be
avoided. React has an excellent
<a href="https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html">article on derived state</a>
which does a great job of explaining why derived state is an anti-pattern. The
focus of this article will be about how to recognize derived state in your
components and several alternatives to derived state.</p>
<h2 id="recognizing-derived-state"><a aria-hidden="true" tabindex="-1" href="#recognizing-derived-state"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Recognizing Derived State</h2>
<p>Before I go any further, let me provide a few examples of derived state to help
you start recognizing derived state patterns. I’ll begin with class based
components as they are easier to recognize than function based components.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#BB9AF7">class</span><span style="color:#A9B1D6"> </span><span style="color:#7DCFFF">PartiallyControlledInput</span><span style="color:#A9B1D6"> </span><span style="color:#9D7CD8;font-style:italic">extends</span><span style="color:#A9B1D6"> </span><span style="color:#7DCFFF">React</span><span style="color:#89DDFF">.</span><span style="color:#BB9AF7">Component</span><span style="color:#A9B1D6"> </span><span style="color:#9ABDF5">{</span></span>
<span class="line"><span style="color:#A9B1D6">  </span><span style="color:#C0CAF5">state</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">=</span><span style="color:#A9B1D6"> </span><span style="color:#9ABDF5">{</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#73DACA">value</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">this</span><span style="color:#89DDFF">.</span><span style="color:#C0CAF5">props</span><span style="color:#89DDFF">.</span><span style="color:#7DCFFF">value</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#A9B1D6">  </span><span style="color:#9ABDF5">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A9B1D6">  </span><span style="color:#7AA2F7">componentWillReceiveProps</span><span style="color:#9ABDF5">(</span><span style="color:#E0AF68">nextProps</span><span style="color:#9ABDF5">)</span><span style="color:#A9B1D6"> </span><span style="color:#9ABDF5">{</span></span>
<span class="line"><span style="color:#9ABDF5">    </span><span style="color:#BB9AF7">if</span><span style="color:#9ABDF5"> (</span><span style="color:#C0CAF5">nextProps</span><span style="color:#89DDFF">.</span><span style="color:#7DCFFF">value</span><span style="color:#9ABDF5"> </span><span style="color:#BB9AF7">!==</span><span style="color:#9ABDF5"> </span><span style="color:#F7768E">this</span><span style="color:#89DDFF">.</span><span style="color:#C0CAF5">props</span><span style="color:#89DDFF">.</span><span style="color:#7DCFFF">value</span><span style="color:#9ABDF5">) {</span></span>
<span class="line"><span style="color:#9ABDF5">      </span><span style="color:#F7768E">this</span><span style="color:#89DDFF">.</span><span style="color:#7AA2F7">setState</span><span style="color:#9ABDF5">({ </span><span style="color:#73DACA">value</span><span style="color:#89DDFF">:</span><span style="color:#9ABDF5"> </span><span style="color:#C0CAF5">nextProps</span><span style="color:#89DDFF">.</span><span style="color:#7DCFFF">value</span><span style="color:#9ABDF5"> })</span></span>
<span class="line"><span style="color:#9ABDF5">    }</span></span>
<span class="line"><span style="color:#9ABDF5">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A9B1D6">  </span><span style="color:#7AA2F7">render</span><span style="color:#9ABDF5">()</span><span style="color:#A9B1D6"> </span><span style="color:#9ABDF5">{</span></span>
<span class="line"><span style="color:#9ABDF5">    </span><span style="color:#BB9AF7;font-style:italic">return</span><span style="color:#9ABDF5"> (</span></span>
<span class="line"><span style="color:#9ABDF5">      </span><span style="color:#BA3C97">&lt;</span><span style="color:#F7768E">input</span></span>
<span class="line"><span style="color:#DE5971">        </span><span style="color:#BB9AF7">onChange</span><span style="color:#89DDFF">=</span><span style="color:#7DCFFF">{</span><span style="color:#9ABDF5">(</span><span style="color:#E0AF68">e</span><span style="color:#9ABDF5">)</span><span style="color:#DE5971"> </span><span style="color:#BB9AF7">=&gt;</span><span style="color:#DE5971"> </span><span style="color:#F7768E">this</span><span style="color:#89DDFF">.</span><span style="color:#7AA2F7">setState</span><span style="color:#9ABDF5">({</span><span style="color:#DE5971"> </span><span style="color:#73DACA">value</span><span style="color:#89DDFF">:</span><span style="color:#DE5971"> </span><span style="color:#C0CAF5">e</span><span style="color:#89DDFF">.</span><span style="color:#C0CAF5">target</span><span style="color:#89DDFF">.</span><span style="color:#7DCFFF">value</span><span style="color:#DE5971"> </span><span style="color:#9ABDF5">})</span><span style="color:#7DCFFF">}</span></span>
<span class="line"><span style="color:#DE5971">        </span><span style="color:#BB9AF7">value</span><span style="color:#89DDFF">=</span><span style="color:#7DCFFF">{</span><span style="color:#F7768E">this</span><span style="color:#89DDFF">.</span><span style="color:#C0CAF5">state</span><span style="color:#89DDFF">.</span><span style="color:#7DCFFF">value}</span></span>
<span class="line"><span style="color:#DE5971">      </span><span style="color:#BA3C97">/&gt;</span></span>
<span class="line"><span style="color:#9ABDF5">    )</span></span>
<span class="line"><span style="color:#9ABDF5">  }</span></span>
<span class="line"><span style="color:#9ABDF5">}</span></span>
<span class="line"></span></code></pre>
<p>In this example, we have a component which is a partially controlled input
field. The component manages its state internally but it also allows the parent
component to update the state by changing the <code>value</code> prop. The key part of this
example is <code>componentWillReceiveProps</code> which is the red flag indicating the
component derives its state from props.</p>
<p>Because <code>componentWillReceiveProps</code> is being deprecated, React has a newer
lifecycle method named <code>getDerivedStateFromProps</code>. This method almost needs no
example as its name speaks for itself, but a quick example won’t hurt.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#BB9AF7">class</span><span style="color:#A9B1D6"> </span><span style="color:#7DCFFF">PartiallyControlledInput</span><span style="color:#A9B1D6"> </span><span style="color:#9D7CD8;font-style:italic">extends</span><span style="color:#A9B1D6"> </span><span style="color:#7DCFFF">React</span><span style="color:#89DDFF">.</span><span style="color:#BB9AF7">Component</span><span style="color:#A9B1D6"> </span><span style="color:#9ABDF5">{</span></span>
<span class="line"><span style="color:#A9B1D6">  </span><span style="color:#C0CAF5">state</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">=</span><span style="color:#A9B1D6"> </span><span style="color:#9ABDF5">{</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#73DACA">value</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">this</span><span style="color:#89DDFF">.</span><span style="color:#C0CAF5">props</span><span style="color:#89DDFF">.</span><span style="color:#7DCFFF">value</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#73DACA">prevFormId</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">this</span><span style="color:#89DDFF">.</span><span style="color:#C0CAF5">props</span><span style="color:#89DDFF">.</span><span style="color:#7DCFFF">formId</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#A9B1D6">  </span><span style="color:#9ABDF5">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A9B1D6">  </span><span style="color:#9D7CD8;font-style:italic">static</span><span style="color:#A9B1D6"> </span><span style="color:#7AA2F7">getDerivedStateFromProps</span><span style="color:#9ABDF5">(</span><span style="color:#E0AF68">props</span><span style="color:#89DDFF">,</span><span style="color:#A9B1D6"> </span><span style="color:#E0AF68">state</span><span style="color:#9ABDF5">)</span><span style="color:#A9B1D6"> </span><span style="color:#9ABDF5">{</span></span>
<span class="line"><span style="color:#9ABDF5">    </span><span style="color:#BB9AF7">if</span><span style="color:#9ABDF5"> (</span><span style="color:#C0CAF5">props</span><span style="color:#89DDFF">.</span><span style="color:#7DCFFF">formId</span><span style="color:#9ABDF5"> </span><span style="color:#BB9AF7">!==</span><span style="color:#9ABDF5"> </span><span style="color:#C0CAF5">state</span><span style="color:#89DDFF">.</span><span style="color:#7DCFFF">prevFormId</span><span style="color:#9ABDF5">) {</span></span>
<span class="line"><span style="color:#9ABDF5">      </span><span style="color:#BB9AF7;font-style:italic">return</span><span style="color:#9ABDF5"> {</span></span>
<span class="line"><span style="color:#9ABDF5">        </span><span style="color:#73DACA">prevFormId</span><span style="color:#89DDFF">:</span><span style="color:#9ABDF5"> </span><span style="color:#C0CAF5">props</span><span style="color:#89DDFF">.</span><span style="color:#7DCFFF">formId</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#9ABDF5">        </span><span style="color:#73DACA">value</span><span style="color:#89DDFF">:</span><span style="color:#9ABDF5"> </span><span style="color:#C0CAF5">props</span><span style="color:#89DDFF">.</span><span style="color:#7DCFFF">value</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#9ABDF5">      }</span></span>
<span class="line"><span style="color:#9ABDF5">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ABDF5">    </span><span style="color:#BB9AF7;font-style:italic">return</span><span style="color:#9ABDF5"> </span><span style="color:#FF9E64">null</span></span>
<span class="line"><span style="color:#9ABDF5">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A9B1D6">  </span><span style="color:#7AA2F7">render</span><span style="color:#9ABDF5">()</span><span style="color:#A9B1D6"> </span><span style="color:#9ABDF5">{</span></span>
<span class="line"><span style="color:#9ABDF5">    </span><span style="color:#BB9AF7;font-style:italic">return</span><span style="color:#9ABDF5"> (</span></span>
<span class="line"><span style="color:#9ABDF5">      </span><span style="color:#BA3C97">&lt;</span><span style="color:#F7768E">input</span></span>
<span class="line"><span style="color:#DE5971">        </span><span style="color:#BB9AF7">onChange</span><span style="color:#89DDFF">=</span><span style="color:#7DCFFF">{</span><span style="color:#9ABDF5">(</span><span style="color:#E0AF68">e</span><span style="color:#9ABDF5">)</span><span style="color:#DE5971"> </span><span style="color:#BB9AF7">=&gt;</span><span style="color:#DE5971"> </span><span style="color:#F7768E">this</span><span style="color:#89DDFF">.</span><span style="color:#7AA2F7">setState</span><span style="color:#9ABDF5">({</span><span style="color:#DE5971"> </span><span style="color:#73DACA">value</span><span style="color:#89DDFF">:</span><span style="color:#DE5971"> </span><span style="color:#C0CAF5">e</span><span style="color:#89DDFF">.</span><span style="color:#C0CAF5">target</span><span style="color:#89DDFF">.</span><span style="color:#7DCFFF">value</span><span style="color:#DE5971"> </span><span style="color:#9ABDF5">})</span><span style="color:#7DCFFF">}</span></span>
<span class="line"><span style="color:#DE5971">        </span><span style="color:#BB9AF7">value</span><span style="color:#89DDFF">=</span><span style="color:#7DCFFF">{</span><span style="color:#F7768E">this</span><span style="color:#89DDFF">.</span><span style="color:#C0CAF5">state</span><span style="color:#89DDFF">.</span><span style="color:#7DCFFF">value}</span></span>
<span class="line"><span style="color:#DE5971">      </span><span style="color:#BA3C97">/&gt;</span></span>
<span class="line"><span style="color:#9ABDF5">    )</span></span>
<span class="line"><span style="color:#9ABDF5">  }</span></span>
<span class="line"><span style="color:#9ABDF5">}</span></span>
<span class="line"></span></code></pre>
<p>As you can see, <code>getDerivedStateFromProps</code> gets even more complex as we are
required to store a prop value in state so when that prop changes we can reset
state based on props.</p>
<p>As we move on to function based components, derived state is a bit tougher to
spot as you have to look for more than just <code>componentWillReceiveProps</code> or
<code>getDerivedStateFromProps</code>.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#BB9AF7">function</span><span style="color:#A9B1D6"> </span><span style="color:#7AA2F7">PartiallyControlledInput</span><span style="color:#9ABDF5">(</span><span style="color:#E0AF68">props</span><span style="color:#9ABDF5">)</span><span style="color:#A9B1D6"> </span><span style="color:#9ABDF5">{</span></span>
<span class="line"><span style="color:#9ABDF5">  </span><span style="color:#9D7CD8;font-style:italic">const</span><span style="color:#9ABDF5"> </span><span style="color:#89DDFF">[</span><span style="color:#BB9AF7">value</span><span style="color:#89DDFF">,</span><span style="color:#9ABDF5"> </span><span style="color:#BB9AF7">setValue</span><span style="color:#89DDFF">]</span><span style="color:#9ABDF5"> </span><span style="color:#89DDFF">=</span><span style="color:#9ABDF5"> </span><span style="color:#7AA2F7">useState</span><span style="color:#9ABDF5">(</span><span style="color:#C0CAF5">props</span><span style="color:#89DDFF">.</span><span style="color:#7DCFFF">value</span><span style="color:#9ABDF5">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ABDF5">  </span><span style="color:#7AA2F7">useEffect</span><span style="color:#9ABDF5">(() </span><span style="color:#BB9AF7">=&gt;</span><span style="color:#9ABDF5"> {</span></span>
<span class="line"><span style="color:#9ABDF5">    </span><span style="color:#7AA2F7">setValue</span><span style="color:#9ABDF5">(</span><span style="color:#C0CAF5">props</span><span style="color:#89DDFF">.</span><span style="color:#7DCFFF">value</span><span style="color:#9ABDF5">)</span></span>
<span class="line"><span style="color:#9ABDF5">  }</span><span style="color:#89DDFF">,</span><span style="color:#9ABDF5"> [</span><span style="color:#C0CAF5">props</span><span style="color:#89DDFF">.</span><span style="color:#7DCFFF">value</span><span style="color:#9ABDF5">])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ABDF5">  </span><span style="color:#BB9AF7;font-style:italic">return</span><span style="color:#9ABDF5"> </span><span style="color:#BA3C97">&lt;</span><span style="color:#F7768E">input</span><span style="color:#DE5971"> </span><span style="color:#BB9AF7">onChange</span><span style="color:#89DDFF">=</span><span style="color:#7DCFFF">{</span><span style="color:#9ABDF5">(</span><span style="color:#E0AF68">e</span><span style="color:#9ABDF5">)</span><span style="color:#DE5971"> </span><span style="color:#BB9AF7">=&gt;</span><span style="color:#DE5971"> </span><span style="color:#7AA2F7">setValue</span><span style="color:#9ABDF5">(</span><span style="color:#C0CAF5">e</span><span style="color:#89DDFF">.</span><span style="color:#C0CAF5">target</span><span style="color:#89DDFF">.</span><span style="color:#7DCFFF">value</span><span style="color:#9ABDF5">)</span><span style="color:#7DCFFF">}</span><span style="color:#DE5971"> </span><span style="color:#BB9AF7">value</span><span style="color:#89DDFF">=</span><span style="color:#7DCFFF">{</span><span style="color:#C0CAF5">value</span><span style="color:#7DCFFF">}</span><span style="color:#DE5971"> </span><span style="color:#BA3C97">/&gt;</span></span>
<span class="line"><span style="color:#9ABDF5">}</span></span>
<span class="line"></span></code></pre>
<p>As you can see, the previous example is a more subtle use of derived state. When
<code>props.value</code> changes, an effect will run which will set the value of the input
with the new prop value. This is essentially the same as the first example we
showed above and suffers from the exact same problems. Just because it is
written with hooks doesn’t mean it is magically better than its class based
equivalent!</p>
<h2 id="alternatives-to-derived-state"><a aria-hidden="true" tabindex="-1" href="#alternatives-to-derived-state"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Alternatives to Derived State</h2>
<p>Now that we’ve seen a few examples of derived state, let’s look at some
alternative solutions.</p>
<h3 id="fully-uncontrolled-component-with-a-key"><a aria-hidden="true" tabindex="-1" href="#fully-uncontrolled-component-with-a-key"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Fully uncontrolled component with a key</h3>
<p>The first option would be to make the component fully uncontrolled and use
React’s special <code>key</code> prop which will create a new instance of the component
rather than updating the existing one. This includes re-initializing component
state with the initial values provided.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#BB9AF7">function</span><span style="color:#A9B1D6"> </span><span style="color:#7AA2F7">FullyUncontrolledInput</span><span style="color:#9ABDF5">(</span><span style="color:#89DDFF">{</span><span style="color:#A9B1D6"> </span><span style="color:#E0AF68">initialValue</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">}</span><span style="color:#9ABDF5">)</span><span style="color:#A9B1D6"> </span><span style="color:#9ABDF5">{</span></span>
<span class="line"><span style="color:#9ABDF5">  </span><span style="color:#9D7CD8;font-style:italic">const</span><span style="color:#9ABDF5"> </span><span style="color:#89DDFF">[</span><span style="color:#BB9AF7">value</span><span style="color:#89DDFF">,</span><span style="color:#9ABDF5"> </span><span style="color:#BB9AF7">setValue</span><span style="color:#89DDFF">]</span><span style="color:#9ABDF5"> </span><span style="color:#89DDFF">=</span><span style="color:#9ABDF5"> </span><span style="color:#7AA2F7">useState</span><span style="color:#9ABDF5">(</span><span style="color:#C0CAF5">initialValue</span><span style="color:#9ABDF5">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ABDF5">  </span><span style="color:#BB9AF7;font-style:italic">return</span><span style="color:#9ABDF5"> </span><span style="color:#BA3C97">&lt;</span><span style="color:#F7768E">input</span><span style="color:#DE5971"> </span><span style="color:#BB9AF7">onChange</span><span style="color:#89DDFF">=</span><span style="color:#7DCFFF">{</span><span style="color:#9ABDF5">(</span><span style="color:#E0AF68">e</span><span style="color:#9ABDF5">)</span><span style="color:#DE5971"> </span><span style="color:#BB9AF7">=&gt;</span><span style="color:#DE5971"> </span><span style="color:#7AA2F7">setValue</span><span style="color:#9ABDF5">(</span><span style="color:#C0CAF5">e</span><span style="color:#89DDFF">.</span><span style="color:#C0CAF5">target</span><span style="color:#89DDFF">.</span><span style="color:#7DCFFF">value</span><span style="color:#9ABDF5">)</span><span style="color:#7DCFFF">}</span><span style="color:#DE5971"> </span><span style="color:#BB9AF7">value</span><span style="color:#89DDFF">=</span><span style="color:#7DCFFF">{</span><span style="color:#C0CAF5">value</span><span style="color:#7DCFFF">}</span><span style="color:#DE5971"> </span><span style="color:#BA3C97">/&gt;</span></span>
<span class="line"><span style="color:#9ABDF5">}</span></span>
<span class="line"></span></code></pre>
<p>To use the component, we simply need to provide an initialValue prop as well as
a <code>key</code> prop. To re-initialize the internal state of the input, we simply need
to change the <code>key</code>. In the following code block, we use a variable named
<code>formId</code> which we can change when the form needs to be reset.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#BB9AF7">function</span><span style="color:#A9B1D6"> </span><span style="color:#7AA2F7">Form</span><span style="color:#9ABDF5">()</span><span style="color:#A9B1D6"> </span><span style="color:#9ABDF5">{</span></span>
<span class="line"><span style="color:#9ABDF5">  </span><span style="color:#BB9AF7;font-style:italic">return</span><span style="color:#9ABDF5"> </span><span style="color:#BA3C97">&lt;</span><span style="color:#DE5971">FullyUncontrolledInput </span><span style="color:#BB9AF7">key</span><span style="color:#89DDFF">=</span><span style="color:#7DCFFF">{</span><span style="color:#C0CAF5">formId</span><span style="color:#7DCFFF">}</span><span style="color:#DE5971"> </span><span style="color:#BB9AF7">initialValue</span><span style="color:#89DDFF">=</span><span style="color:#89DDFF">&quot;</span><span style="color:#9ECE6A">Initial</span><span style="color:#89DDFF">&quot;</span><span style="color:#DE5971"> </span><span style="color:#BA3C97">/&gt;</span></span>
<span class="line"><span style="color:#9ABDF5">}</span></span>
<span class="line"></span></code></pre>
<p>Fully controlled component The next option is to make the input fully controlled
and let the parent component manage its state. This option will require us to
add an <code>onChange</code> prop to the input component so the parent can listen to
changes and update state accordingly.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#BB9AF7">function</span><span style="color:#A9B1D6"> </span><span style="color:#7AA2F7">FullyControlledInput</span><span style="color:#9ABDF5">(</span><span style="color:#89DDFF">{</span><span style="color:#A9B1D6"> </span><span style="color:#E0AF68">value</span><span style="color:#89DDFF">,</span><span style="color:#A9B1D6"> </span><span style="color:#E0AF68">onChange</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">}</span><span style="color:#9ABDF5">)</span><span style="color:#A9B1D6"> </span><span style="color:#9ABDF5">{</span></span>
<span class="line"><span style="color:#9ABDF5">  </span><span style="color:#BB9AF7;font-style:italic">return</span><span style="color:#9ABDF5"> </span><span style="color:#BA3C97">&lt;</span><span style="color:#F7768E">input</span><span style="color:#DE5971"> </span><span style="color:#BB9AF7">onChange</span><span style="color:#89DDFF">=</span><span style="color:#7DCFFF">{</span><span style="color:#9ABDF5">(</span><span style="color:#E0AF68">e</span><span style="color:#9ABDF5">)</span><span style="color:#DE5971"> </span><span style="color:#BB9AF7">=&gt;</span><span style="color:#DE5971"> </span><span style="color:#7AA2F7">onChange</span><span style="color:#9ABDF5">(</span><span style="color:#C0CAF5">e</span><span style="color:#89DDFF">.</span><span style="color:#C0CAF5">target</span><span style="color:#89DDFF">.</span><span style="color:#7DCFFF">value</span><span style="color:#9ABDF5">)</span><span style="color:#7DCFFF">}</span><span style="color:#DE5971"> </span><span style="color:#BB9AF7">value</span><span style="color:#89DDFF">=</span><span style="color:#7DCFFF">{</span><span style="color:#C0CAF5">value</span><span style="color:#7DCFFF">}</span><span style="color:#DE5971"> </span><span style="color:#BA3C97">/&gt;</span></span>
<span class="line"><span style="color:#9ABDF5">}</span></span>
<span class="line"></span></code></pre>
<p>With our fully controlled input component, we now can add a simple <code>useState</code>
hook to our form component which will manage the state of our input.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#BB9AF7">function</span><span style="color:#A9B1D6"> </span><span style="color:#7AA2F7">Form</span><span style="color:#9ABDF5">()</span><span style="color:#A9B1D6"> </span><span style="color:#9ABDF5">{</span></span>
<span class="line"><span style="color:#9ABDF5">  </span><span style="color:#9D7CD8;font-style:italic">const</span><span style="color:#9ABDF5"> </span><span style="color:#89DDFF">[</span><span style="color:#BB9AF7">value</span><span style="color:#89DDFF">,</span><span style="color:#9ABDF5"> </span><span style="color:#BB9AF7">setValue</span><span style="color:#89DDFF">]</span><span style="color:#9ABDF5"> </span><span style="color:#89DDFF">=</span><span style="color:#9ABDF5"> </span><span style="color:#7AA2F7">useState</span><span style="color:#9ABDF5">(</span><span style="color:#89DDFF">&quot;</span><span style="color:#9ECE6A">Initial</span><span style="color:#89DDFF">&quot;</span><span style="color:#9ABDF5">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ABDF5">  </span><span style="color:#BB9AF7;font-style:italic">return</span><span style="color:#9ABDF5"> </span><span style="color:#BA3C97">&lt;</span><span style="color:#DE5971">FullyControlledInput </span><span style="color:#BB9AF7">onChange</span><span style="color:#89DDFF">=</span><span style="color:#7DCFFF">{</span><span style="color:#C0CAF5">setValue</span><span style="color:#7DCFFF">}</span><span style="color:#DE5971"> </span><span style="color:#BB9AF7">value</span><span style="color:#89DDFF">=</span><span style="color:#7DCFFF">{</span><span style="color:#C0CAF5">value</span><span style="color:#7DCFFF">}</span><span style="color:#DE5971"> </span><span style="color:#BA3C97">/&gt;</span></span>
<span class="line"><span style="color:#9ABDF5">}</span></span>
<span class="line"></span></code></pre>
<h3 id="custom-hooks"><a aria-hidden="true" tabindex="-1" href="#custom-hooks"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Custom hooks!</h3>
<p>While the previous examples sound like easy solutions, many real-world
components are much more complex than those simple examples. In these
situations, creating a custom hook might just be what you need to achieve a high
level of customization without large boilerplate.</p>
<p>For example, consider a date picker component which accepts props for the
currently selected day and month as well as event handlers when the user changes
the day or month. Rather than making our form component manage all the state and
event handlers, we can wrap that logic in a custom <code>useDatePicker</code> hook!</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#BB9AF7">function</span><span style="color:#A9B1D6"> </span><span style="color:#7AA2F7">useDatePicker</span><span style="color:#9ABDF5">(</span><span style="color:#E0AF68">initialValues</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">=</span><span style="color:#A9B1D6"> </span><span style="color:#9ABDF5">{</span><span style="color:#A9B1D6"> </span><span style="color:#73DACA">day</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#FF9E64">1</span><span style="color:#89DDFF">,</span><span style="color:#A9B1D6"> </span><span style="color:#73DACA">month</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">&quot;</span><span style="color:#9ECE6A">Jan</span><span style="color:#89DDFF">&quot;</span><span style="color:#A9B1D6"> </span><span style="color:#9ABDF5">})</span><span style="color:#A9B1D6"> </span><span style="color:#9ABDF5">{</span></span>
<span class="line"><span style="color:#9ABDF5">  </span><span style="color:#9D7CD8;font-style:italic">const</span><span style="color:#9ABDF5"> </span><span style="color:#89DDFF">[</span><span style="color:#BB9AF7">month</span><span style="color:#89DDFF">,</span><span style="color:#9ABDF5"> </span><span style="color:#BB9AF7">setMonth</span><span style="color:#89DDFF">]</span><span style="color:#9ABDF5"> </span><span style="color:#89DDFF">=</span><span style="color:#9ABDF5"> </span><span style="color:#7AA2F7">useState</span><span style="color:#9ABDF5">(</span><span style="color:#C0CAF5">initialValues</span><span style="color:#89DDFF">.</span><span style="color:#7DCFFF">month</span><span style="color:#9ABDF5">)</span></span>
<span class="line"><span style="color:#9ABDF5">  </span><span style="color:#9D7CD8;font-style:italic">const</span><span style="color:#9ABDF5"> </span><span style="color:#89DDFF">[</span><span style="color:#BB9AF7">day</span><span style="color:#89DDFF">,</span><span style="color:#9ABDF5"> </span><span style="color:#BB9AF7">setDay</span><span style="color:#89DDFF">]</span><span style="color:#9ABDF5"> </span><span style="color:#89DDFF">=</span><span style="color:#9ABDF5"> </span><span style="color:#7AA2F7">useState</span><span style="color:#9ABDF5">(</span><span style="color:#C0CAF5">initialValues</span><span style="color:#89DDFF">.</span><span style="color:#7DCFFF">day</span><span style="color:#9ABDF5">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ABDF5">  </span><span style="color:#BB9AF7;font-style:italic">return</span><span style="color:#9ABDF5"> {</span></span>
<span class="line"><span style="color:#9ABDF5">    </span><span style="color:#73DACA">datePickerProps</span><span style="color:#89DDFF">:</span><span style="color:#9ABDF5"> {</span></span>
<span class="line"><span style="color:#9ABDF5">      </span><span style="color:#C0CAF5">day</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#9ABDF5">      </span><span style="color:#C0CAF5">month</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#9ABDF5">      </span><span style="color:#73DACA">onDayChange</span><span style="color:#89DDFF">:</span><span style="color:#9ABDF5"> </span><span style="color:#C0CAF5">setDay</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#9ABDF5">      </span><span style="color:#73DACA">onMonthChange</span><span style="color:#89DDFF">:</span><span style="color:#9ABDF5"> </span><span style="color:#C0CAF5">setMonth</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#9ABDF5">    }</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#9ABDF5">    </span><span style="color:#C0CAF5">day</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#9ABDF5">    </span><span style="color:#C0CAF5">month</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#9ABDF5">    </span><span style="color:#C0CAF5">setDay</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#9ABDF5">    </span><span style="color:#C0CAF5">setMonth</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#9ABDF5">  }</span></span>
<span class="line"><span style="color:#9ABDF5">}</span></span>
<span class="line"></span></code></pre>
<p>Now, we can very easily call the <code>useDatePicker</code> hook inside our form component
and pass <code>datePickerProps</code> to the date picker component which will add all the
necessary props for managing the state of the component.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#BB9AF7">function</span><span style="color:#A9B1D6"> </span><span style="color:#7AA2F7">Form</span><span style="color:#9ABDF5">()</span><span style="color:#A9B1D6"> </span><span style="color:#9ABDF5">{</span></span>
<span class="line"><span style="color:#9ABDF5">  </span><span style="color:#9D7CD8;font-style:italic">const</span><span style="color:#9ABDF5"> </span><span style="color:#89DDFF">{</span><span style="color:#9ABDF5"> </span><span style="color:#BB9AF7">datePickerProps</span><span style="color:#89DDFF">,</span><span style="color:#9ABDF5"> </span><span style="color:#BB9AF7">day</span><span style="color:#89DDFF">,</span><span style="color:#9ABDF5"> </span><span style="color:#BB9AF7">month</span><span style="color:#9ABDF5"> </span><span style="color:#89DDFF">}</span><span style="color:#9ABDF5"> </span><span style="color:#89DDFF">=</span><span style="color:#9ABDF5"> </span><span style="color:#7AA2F7">useDatePicker</span><span style="color:#9ABDF5">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ABDF5">  </span><span style="color:#7AA2F7">useEffect</span><span style="color:#9ABDF5">(() </span><span style="color:#BB9AF7">=&gt;</span><span style="color:#9ABDF5"> {</span></span>
<span class="line"><span style="color:#89DDFF">    </span><span style="color:#565F89;font-style:italic">// Do something when day or month changes</span></span>
<span class="line"><span style="color:#9ABDF5">  }</span><span style="color:#89DDFF">,</span><span style="color:#9ABDF5"> [</span><span style="color:#7DCFFF">day</span><span style="color:#89DDFF">,</span><span style="color:#9ABDF5"> </span><span style="color:#7DCFFF">month</span><span style="color:#9ABDF5">])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ABDF5">  </span><span style="color:#BB9AF7;font-style:italic">return</span><span style="color:#9ABDF5"> </span><span style="color:#BA3C97">&lt;</span><span style="color:#DE5971">DatePicker </span><span style="color:#7DCFFF">{</span><span style="color:#F7768E;font-style:italic">...</span><span style="color:#C0CAF5">datePickerProps</span><span style="color:#7DCFFF">}</span><span style="color:#DE5971"> </span><span style="color:#BB9AF7">theme</span><span style="color:#89DDFF">=</span><span style="color:#89DDFF">&quot;</span><span style="color:#9ECE6A">dark</span><span style="color:#89DDFF">&quot;</span><span style="color:#DE5971"> </span><span style="color:#BA3C97">/&gt;</span></span>
<span class="line"><span style="color:#9ABDF5">}</span></span>
<span class="line"></span></code></pre>
<p>Because the hook isn’t directly tied to the component, we can achieve a high
level of customization. For example, if we want to trigger some side effect when
the day changes, we can simply add a <code>useEffect</code> hook with a dependency on the
<code>day</code> variable. Or, if we needed to customize the <code>onDayChange</code> logic, we could
override the prop returned in <code>datePickerProps</code> with a custom <code>onDayChange</code>
prop. We could even create a reset button in the form component which when
clicked uses the <code>setDay</code> and <code>setMonth</code> functions to reset the date picker to
the current day. The possibilities are endless, so use your imagination and come
up with something great!</p>]]></content:encoded>
            <author>info@mskelton.dev (Mark Skelton)</author>
        </item>
        <item>
            <title><![CDATA[The Dangers of Shallow Rendering]]></title>
            <link>https://mskelton.dev/blog/the-dangers-of-shallow-rendering</link>
            <guid>https://mskelton.dev/blog/the-dangers-of-shallow-rendering</guid>
            <pubDate>Sat, 21 Mar 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[Shallow rendering is an approach to unit testing made popular by the Enzyme library. In this article, I discuss many of the problems that arise when using shallow rendering and why you should avoid it when writing unit tests for your React components.]]></description>
            <content:encoded><![CDATA[<p>In my article titled ”<a href="/blog/a-tale-of-two-ideas">A Tale of Two Ideas</a>” I
discussed my method for discerning between opposing ideas and used the topic of
shallow rendering as an example of a topic which has very distinct and differing
opinions. Although I did not tell my opinion in the article as I didn’t want to
taint the purpose of the article, I did promise to publish an article with my
opinions at a later point. And now, that time has come!</p>
<h2 id="tldr"><a aria-hidden="true" tabindex="-1" href="#tldr"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>TLDR</h2>
<p>Rather than making you scroll all the way to the end to see my list of reasons,
they are listed succinctly in the following list. If you don’t like what you
see, you won’t be forced to read any more. 🙂</p>
<ol>
<li>Shallow rendering creates additional failure points.</li>
<li>Shallow rendering decreases confidence.</li>
<li>Shallow rendering complicates refactoring.</li>
</ol>
<h2 id="shallow-rendering-creates-additional-failure-points"><a aria-hidden="true" tabindex="-1" href="#shallow-rendering-creates-additional-failure-points"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Shallow Rendering Creates Additional Failure Points</h2>
<p>What is the purpose of shallow rendering in the first place? According to the
<a href="https://enzymejs.github.io/enzyme/docs/api/shallow.html">Enzyme docs</a>,</p>
<blockquote>
<p>Shallow rendering is useful to constrain yourself to testing a component as a
unit, and to ensure that your tests aren’t indirectly asserting on behavior of
child components.</p>
</blockquote>
<p>To a developer with a component driven design mindset, this sounds great since
you can build your components and tests together and have confidence that your
components work as expected. However, the fundamental flaw with this idea is
that components which work in isolation might be integrated together incorrectly
resulting in unexpected user behavior. To fix this, you are required to write
additional integration tests to verify that you have integrated your components
correctly. This not only increases the number of tests you must maintain, but it
also overcomplicates what can be very simple testing.</p>
<p>A simple way to reduce additional failure points when testing is to move your
tests up the component tree and test larger pieces of your application. For
example, if you have a component with two child components and each of those
three components has a separate set of tests, reduce it to a single set of tests
using the highest level component. In addition to testing the components, this
will verify that your components are properly integrated removing that
additional point of failure.</p>
<h2 id="shallow-rendering-decreases-confidence"><a aria-hidden="true" tabindex="-1" href="#shallow-rendering-decreases-confidence"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Shallow Rendering Decreases Confidence</h2>
<p>When developing web applications, the end result is some form of user value.
Whether that is a visual or functional improvement, every change that is made
should either directly provide user value or remove barriers to creating user
value (e.g. refactoring to enable faster iteration). Tests fit in the second
category as they provide confidence that new features or changes provide the
expected user value and do not cause regressions in existing user value.</p>
<p>So, if the goal of testing is to increase confidence that your code provides the
user value it is supposed to, you should write tests that provide the highest
level of confidence possible. This is where shallow rendering really breaks
down. Shallow rendering might give high confidence that a single component is
working correctly, but it gives little to no confidence that it results in the
correct user behavior.</p>
<p>It is also important to mention that increased confidence doesn’t necessarily
result in less time spent writing tests. Before you panic, that’s okay! The most
likely outcome of increased confidence is better testing coverage. Since you
won’t spend as much time fixing false positives/negatives, you will have more
time to test known edge cases and perform exploratory testing to find other edge
cases.</p>
<h2 id="shallow-rendering-complicates-refactoring"><a aria-hidden="true" tabindex="-1" href="#shallow-rendering-complicates-refactoring"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Shallow Rendering Complicates Refactoring</h2>
<p>Refactoring is a necessary part of software development and often occurs many
times during the lifetime of an application. When refactoring code, you should
be able to lean heavily on your test suite to verify that your changes did not
cause regressions in your applications. However, shallow rendering complicates
this due to its tight coupling of components and tests. To understand this
better, let me give an example.</p>
<p>Consider a React component named <code>UserDetails</code> which displays user information
(i.e. name, email, phone number) in a list. The phone number is passed to a
separate component named <code>FormattedPhone</code>. During initial development of the
component, I added a test that verifies the <code>UserDetails</code> component renders a
<code>FormattedPhone</code> component with the correct props. Later, I decide to remove the
<code>FormattedPhone</code> component and format the phone in the <code>UserDetails</code> component.
Since I used shallow rendering, my test breaks since it was expecting to find a
<code>FormattedPhone</code> component. Not only do the tests now require changes, but they
don’t give me confidence that the changes to the components maintained the
expected user behavior.</p>
<h2 id="a-better-way"><a aria-hidden="true" tabindex="-1" href="#a-better-way"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>A Better Way</h2>
<p>If you are convinced that shallow rendering is not a good testing practice, the
next big question is what to do instead? While there are many ways to answer
this question, my current thoughts are best described with the following
recommendations:</p>
<ol>
<li>Replace shallow rendering with full DOM rendering. If you use Enzyme, this
means replacing <code>shallow</code> with <code>mount</code>.</li>
<li>Think less about props/state and more about user behavior. Rather than
directly interacting with your components props, instead try rendering
additional DOM elements which you can interact with which in turn affect your
component. This is more similar to a real application where user interaction
affects your component.</li>
<li>Never under any circumstance use APIs which allow you to directly affect
component state (e.g. Enzyme’s <code>setState</code> method). This does not accurately
reflect user behavior. Directly modifying props is also not ideal, but it is
less problematic than directly modifying state.</li>
<li>Try out
<a href="https://testing-library.com/docs/react-testing-library/intro">React Testing Library</a>
which does not support shallow rendering and has an API which prevents many
common testing patterns which test implementation detail. Although not
required to write good tests, I have found it very helpful in increasing the
quality of my tests and the confidence they provide.</li>
</ol>]]></content:encoded>
            <author>info@mskelton.dev (Mark Skelton)</author>
        </item>
        <item>
            <title><![CDATA[Why I Don't Use Environment Variables]]></title>
            <link>https://mskelton.dev/blog/why-i-dont-use-environment-variables</link>
            <guid>https://mskelton.dev/blog/why-i-dont-use-environment-variables</guid>
            <pubDate>Sat, 11 Jan 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[Environment variables are a great way to manage configuration in your applications, but they introduce a number of challenges. In this article, I explain an alternative approach to managing configuration in your applications using environment files rather than environment variables.]]></description>
            <content:encoded><![CDATA[<p>Environment variables are very helpful for software development as they allow
you to easily change certain aspects of your application based on the
environment in which your application is used. However, environment variables do
have some challenges which can cause some issues in certain scenarios. In this
article, I’ll explore some of those challenges and explain why I don’t use
environment variables in my applications.</p>
<h2 id="globally-available"><a aria-hidden="true" tabindex="-1" href="#globally-available"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Globally Available</h2>
<p>The first challenge with environment variables is the fact that they are
globally available to all applications. The main problem this can cause is
naming conflicts between applications. For example, if two applications both
have an API token to some service (i.e. npm), you have to choose different names
for the environment variables as a generic name like <code>NPM_TOKEN</code> would cause a
conflict between the two applications. This might seem like a contrived example
but it is actually one that I have faced at my job and it has caused some
serious annoyances.</p>
<h2 id="shell-specific"><a aria-hidden="true" tabindex="-1" href="#shell-specific"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Shell Specific</h2>
<p>Another challenge with environment variables is that they are only available in
the shell which you have configured them for. Again, this might not seem like a
big deal, but if you have to switch between shells on occasion this can be a
real pain as the variables are not shared by both shells and must be maintained
in each shell.</p>
<h2 id="difficult-to-find"><a aria-hidden="true" tabindex="-1" href="#difficult-to-find"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Difficult To Find</h2>
<p>Because environment variables are configured in a file such as <code>~/.bashrc</code> it is
harder to determine the value of each environment variable quickly. Although an
minor inconvenience, it still adds to the list of challenges with environment
variables.</p>
<h2 id="my-solution"><a aria-hidden="true" tabindex="-1" href="#my-solution"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>My Solution</h2>
<p>My solution to this is to use <code>.env</code> files to store environment variables on a
per-application basis. These files are not shell specific and they work across
platforms. Additionally, <code>.env</code> files are stored alongside your application code
making it very easy to view and change the environment variables for your
application.</p>
<p>Loading <code>.env</code> files into your application can be done manually or using a
package such <a href="https://www.npmjs.com/package/dotenv">Node’s dotenv package</a>.
Other languages have similar packages such as
<a href="https://pypi.org/project/python-dotenv/">Python’s dotenv package</a>. Both of
these packages, and likely others, will intelligently load environment variables
so as to not override existing system environment variables unless explicitly
requested. This behavior allows you to still specific environment variables on a
per-command basis when running commands in your shell.</p>
<h2 id="should-i-switch-to-env"><a aria-hidden="true" tabindex="-1" href="#should-i-switch-to-env"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Should I Switch To <code>.env</code>?</h2>
<p>If you aren’t having any issues with environment variables, I wouldn’t recommend
switching to <code>.env</code> just because it sounds neat. If however you have encountered
some of the same challenges I mentioned in this article, you may want to
experiment with <code>.env</code> as a way to augment or replace your usage of environment
variables. Finally, remember that this article is merely my opinion on the
subject and is by no means a comprehensive article about all the aspects of this
subject. Regardless of if you decide to use any of the techniques I discussed in
this article, I hope that it helped you learn a bit more about this particular
area of software development. Cheers!</p>]]></content:encoded>
            <author>info@mskelton.dev (Mark Skelton)</author>
        </item>
        <item>
            <title><![CDATA[Customizing npmjs.com Styles]]></title>
            <link>https://mskelton.dev/blog/customizing-npm-styles</link>
            <guid>https://mskelton.dev/blog/customizing-npm-styles</guid>
            <pubDate>Sun, 01 Dec 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Viewing npm packages on npmjs.com is a common tasks when developing front-end applications. In this article, I show a few small CSS customizations to improve the npmjs.com styles.]]></description>
            <content:encoded><![CDATA[<p>Like most front-end developers, I use <a href="https://npmjs.com">npmjs.com</a> to find new
packages or read documentation for packages I use. I’ve also published some npm
packages of my own, giving back to the open-source community.</p>
<p>As I have used <a href="https://npmjs.com">npmjs.com</a> more in the past few months, a
couple of the styles used on the package view page were just bugging me as they
gave the page an unfinished and poorly styled look. So, with the help of the
Chrome Stylus extension I was able to add a couple quick styles to get the page
looking nice. The before and after of the page are shown below.</p>
<div style="position:relative;overflow:hidden;user-select:none;-khtml-user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none" data-rcs="root"><img alt="Old styles" srcSet="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fold.78e362dc.png&amp;w=1920&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fold.78e362dc.png&amp;w=3840&amp;q=75 2x" src="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fold.78e362dc.png&amp;w=3840&amp;q=75" width="1524" height="1298" decoding="async" data-nimg="1" loading="lazy" style="color:transparent;display:block;width:100%;height:100%;max-width:100%;box-sizing:border-box;object-fit:cover;object-position:center;background-size:cover;background-position:center;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http%3A//www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 8 7&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;1&#x27;/%3E%3C/filter%3E%3Cimage preserveAspectRatio=&#x27;none&#x27; filter=&#x27;url(%23b)&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; height=&#x27;100%25&#x27; width=&#x27;100%25&#x27; href=&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAMAAAACh/xsAAAAElBMVEX39/f+/v7t7ezj4+PNycevpKBGAGN5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAKElEQVQImWNgYmZmZmJkZGRgZmKAABDNCBIBs0CABaQAJMIKY0BlGAEIHAA6vwM/fQAAAABJRU5ErkJggg==&#x27;/%3E%3C/svg%3E&quot;)"/><div style="position:absolute;top:0;left:0;width:100%;height:100%;will-change:clip;user-select:none;-khtml-user-select:none;-moz-user-select:none;-webkit-user-select:none" data-rcs="clip-item"><img alt="New styles" srcSet="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fnew.aa8591da.png&amp;w=1920&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fnew.aa8591da.png&amp;w=3840&amp;q=75 2x" src="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fnew.aa8591da.png&amp;w=3840&amp;q=75" width="1524" height="1298" decoding="async" data-nimg="1" loading="lazy" style="color:transparent;display:block;width:100%;height:100%;max-width:100%;box-sizing:border-box;object-fit:cover;object-position:center;background-size:cover;background-position:center;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http%3A//www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 8 7&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;1&#x27;/%3E%3C/filter%3E%3Cimage preserveAspectRatio=&#x27;none&#x27; filter=&#x27;url(%23b)&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; height=&#x27;100%25&#x27; width=&#x27;100%25&#x27; href=&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAMAAAACh/xsAAAAElBMVEX5+Pj+/v7o5+by8vLLxsOypqKjxbqpAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAJ0lEQVQImTWJwQ0AIBCDCtX9VzZelBeEqJYQbYa2ARgZlrch+8sbHAnvAEi+U3XDAAAAAElFTkSuQmCC&#x27;/%3E%3C/svg%3E&quot;)"/></div><div style="position:absolute;top:0;width:100%;height:100%;pointer-events:none" data-rcs="handle-container"><div style="position:absolute;height:100%;transform:translateX(-50%);pointer-events:all"><div class="animate-[delay-appear_200ms_linear_200ms_forwards] text-teal-500 opacity-0 transition" style="display:flex;flex-direction:column;place-items:center;height:100%;cursor:ew-resize;pointer-events:none"><div class="__rcs-handle-line" style="flex-grow:1;height:100%;width:2px;background-color:currentColor;pointer-events:auto;box-shadow:0 0 7px rgba(0,0,0,.35)"></div><div class="__rcs-handle-button" style="display:grid;grid-auto-flow:column;gap:8px;place-content:center;flex-shrink:0;width:56px;height:56px;border-radius:50%;border-style:solid;border-width:2px;pointer-events:auto;backdrop-filter:blur(7px);-webkit-backdrop-filter:blur(7px);box-shadow:0 0 7px rgba(0,0,0,.35);border-color:currentcolor"><div style="width:0;height:0;border-top:8px solid transparent;border-right:10px solid;border-bottom:8px solid transparent"></div><div style="width:0;height:0;border-top:8px solid transparent;border-right:10px solid;border-bottom:8px solid transparent;transform:rotate(180deg)"></div></div><div class="__rcs-handle-line" style="flex-grow:1;height:100%;width:2px;background-color:currentColor;pointer-events:auto;box-shadow:0 0 7px rgba(0,0,0,.35)"></div></div></div></div></div>
<p>Here is the code I used for this simple style adjustment.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#2AC3DE">blockquote</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">&gt;</span><span style="color:#A9B1D6"> </span><span style="color:#2AC3DE">p</span><span style="color:#A9B1D6"> </span><span style="color:#9ABDF5">{</span></span>
<span class="line"><span style="color:#9ABDF5">  </span><span style="color:#7AA2F7">margin</span><span style="color:#89DDFF">:</span><span style="color:#9ABDF5"> </span><span style="color:#FF9E64">5</span><span style="color:#F7768E">px</span><span style="color:#BB9AF7"> </span><span style="color:#FF9E64">0</span><span style="color:#BB9AF7"> !important</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#9ABDF5">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#2AC3DE">table</span><span style="color:#A9B1D6"> </span><span style="color:#9ABDF5">{</span></span>
<span class="line"><span style="color:#9ABDF5">  </span><span style="color:#7AA2F7">margin-bottom</span><span style="color:#89DDFF">:</span><span style="color:#9ABDF5"> </span><span style="color:#FF9E64">16</span><span style="color:#F7768E">px</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#9ABDF5">}</span></span>
<span class="line"></span></code></pre>]]></content:encoded>
            <author>info@mskelton.dev (Mark Skelton)</author>
        </item>
        <item>
            <title><![CDATA[Automated npm Publishing Using GitHub Actions]]></title>
            <link>https://mskelton.dev/blog/automated-npm-publishing-using-github-actions</link>
            <guid>https://mskelton.dev/blog/automated-npm-publishing-using-github-actions</guid>
            <pubDate>Sat, 16 Nov 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Releasing npm packages can be a challenge. There are often many steps in the process and forgetting a step can result in a package being released incorrectly. In this article, I will show how to use GitHub Actions to automate some of the manual steps required to simplify your npm publishing workflow.]]></description>
            <content:encoded><![CDATA[<p>GitHub Actions are a great way to setup CI/CD tasks directly in your GitHub
repos for running tests, deploying code, publishing packages, and so much more.
I’ve recently done some work to setup actions in my open source repositories for
easily publishing npm packages without forcing me to run a bunch of commands
from my local development machine. In this article, I’ll go through some basic
jobs that you can run using GitHub Actions to simplify the process of publishing
npm packages.</p>
<h2 id="basic-publish-action"><a aria-hidden="true" tabindex="-1" href="#basic-publish-action"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Basic Publish Action</h2>
<p>To get our feet wet with publishing npm packages using GitHub Actions, let’s
start by creating a simple action that will publish to npm when we push a new
version tag.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#F7768E">name</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">Publish</span></span>
<span class="line"><span style="color:#FF9E64">on</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">  </span><span style="color:#F7768E">push</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#F7768E">tags</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">v*.*.*</span></span>
<span class="line"><span style="color:#F7768E">jobs</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">  </span><span style="color:#F7768E">publish</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#F7768E">runs-on</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">ubuntu-latest</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#F7768E">steps</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">uses</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">actions/checkout@v3</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">uses</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">actions/setup-node@v3</span></span>
<span class="line"><span style="color:#A9B1D6">        </span><span style="color:#F7768E">with</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">          </span><span style="color:#F7768E">node-version</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">&#x27;</span><span style="color:#9ECE6A">16.x</span><span style="color:#89DDFF">&#x27;</span></span>
<span class="line"><span style="color:#A9B1D6">          </span><span style="color:#F7768E">registry-url</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">https://registry.npmjs.org/</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">run</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">yarn</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">run</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">yarn publish</span></span>
<span class="line"><span style="color:#A9B1D6">        </span><span style="color:#F7768E">env</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">          </span><span style="color:#F7768E">NODE_AUTH_TOKEN</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">${{ secrets.NPM_TOKEN }}</span></span>
<span class="line"></span></code></pre>
<p>This action is pretty basic and easy to understand. For the trigger, we use the
tag pattern of <code>v*.*.*</code> to match semantic version tags (i.e. v1.0.0). When the
action is triggered, we install dependencies by running <code>yarn</code> and then publish
the package to npm using <code>yarn publish</code>. This could be modified to use
<code>npm install</code> and <code>npm publish</code> if you prefer npm over Yarn.</p>
<p>An important part of this action is the <code>NODE_AUTH_TOKEN</code> environment variable
which is required for authenticating with npm to publish the package. The
example above uses GitHub secrets for storing the token which can be generated
in your npm profile.</p>
<h2 id="publishing-a-release"><a aria-hidden="true" tabindex="-1" href="#publishing-a-release"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Publishing A Release</h2>
<p>To publish a release with our new action, we can run <code>yarn publish</code> or
<code>npm publish</code> to increment the package version in package.json and create a new
git tag which we will use to trigger our action. After running the publish
command, we can run <code>git push &amp;&amp; git push --tags</code> to push our tag to GitHub and
fire off our action!</p>
<p><em>Hint: adding a <code>postversion</code> script to package.json will save us from having to
run the git push command every time we run our publish command. That script
would look like this <code>&quot;postversion&quot;: &quot;git push &amp;&amp; git push --tags&quot;</code> and should
be places in the <code>scripts</code> section of your package.json</em></p>
<h2 id="creating-github-releases"><a aria-hidden="true" tabindex="-1" href="#creating-github-releases"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Creating GitHub Releases</h2>
<p>Now that we have the basic publish action created, we can improve it so it will
automatically create a GitHub release with change notes pulled automatically
from a <code>CHANGELOG.md</code> file. To make this easy, we will be using a custom GitHub
action by <a href="https://github.com/Roang-zero1">Roang-zero1</a> that will automate this
entire process for us. To set this up, add the following job to your action.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#F7768E">create-release</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">  </span><span style="color:#F7768E">runs-on</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">ubuntu-latest</span></span>
<span class="line"><span style="color:#A9B1D6">  </span><span style="color:#F7768E">steps</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">uses</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">actions/checkout@v3</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">uses</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">Roang-zero1/github-create-release-action@master</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#F7768E">env</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">        </span><span style="color:#F7768E">GITHUB_TOKEN</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">${{ secrets.GITHUB_TOKEN }}</span></span>
<span class="line"></span></code></pre>
<p>As you can see, the only thing we need to do is use the
<code>github-create-release-action</code> and set the <code>GITHUB_TOKEN</code> environment variable
so the custom action can authenticate with GitHub to create the release and
upload the change notes. The value of this is the <code>GITHUB_TOKEN</code> secret that is
<a href="https://docs.github.com/en/actions/security-guides/automatic-token-authentication">automatically available inside all GitHub actions</a>.</p>
<h2 id="running-tests"><a aria-hidden="true" tabindex="-1" href="#running-tests"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Running Tests</h2>
<p>While the above examples work great for simple packages where you just need to
publish and create a release, most packages will probably have a suite of tests
that you will want to run before publishing and releasing. To update our action,
we are going to need to make a few changes.</p>
<p>First, we will need to change the action trigger from on tags to on push. This
way we can use the same action to run our tests on branches and pull requests.
The trigger should now look like this.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#FF9E64">on</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">[</span><span style="color:#9ECE6A">push</span><span style="color:#89DDFF">]</span></span>
<span class="line"></span></code></pre>
<p>Next, we will add a <code>test</code> job to the action that uses a matrix strategy to test
our package against multiple node versions. You could also add OS versions to
the matrix but for our example we’ll keep it simple.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#F7768E">test</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">  </span><span style="color:#F7768E">runs-on</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">ubuntu-latest</span></span>
<span class="line"><span style="color:#A9B1D6">  </span><span style="color:#F7768E">strategy</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#F7768E">matrix</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#F7768E">node-version</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">[</span><span style="color:#9ECE6A">10.x</span><span style="color:#89DDFF">,</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">12.x</span><span style="color:#89DDFF">]</span></span>
<span class="line"><span style="color:#A9B1D6">  </span><span style="color:#F7768E">steps</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">uses</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">actions/checkout@v3</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">uses</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">actions/setup-node@v3</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#F7768E">with</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">        </span><span style="color:#F7768E">node-version</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">${{ matrix.node-version }}</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">run</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">yarn</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">run</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">yarn test</span></span>
<span class="line"></span></code></pre>
<p>The last step is to update our other two jobs to depend on the test job and only
run on tags. By depending on the test job we can ensure that we don’t publish a
package until the tests have run and passed. Additionally, since we changed our
trigger from tags to any push, we need to add a conditional to ensure that the
publish and release steps will only run for tags while the test can still run
for any push. We will need to add the following two lines to both the publish
and release jobs.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#F7768E">needs</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">test</span></span>
<span class="line"><span style="color:#F7768E">if</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">startsWith(github.ref, &#x27;refs/tags/&#x27;)</span></span>
<span class="line"></span></code></pre>
<h2 id="putting-it-all-together"><a aria-hidden="true" tabindex="-1" href="#putting-it-all-together"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Putting It All together</h2>
<p>Putting all three of these pieces together, our final action would look like
this. In some cases, you may not need all three of the jobs so you can easily
mix and match to suit you needs.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#F7768E">name</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">Test, Publish, &amp; Release</span></span>
<span class="line"><span style="color:#FF9E64">on</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">[</span><span style="color:#9ECE6A">push</span><span style="color:#89DDFF">]</span></span>
<span class="line"><span style="color:#F7768E">jobs</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">  </span><span style="color:#F7768E">test</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#F7768E">runs-on</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">ubuntu-latest</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#F7768E">strategy</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#F7768E">matrix</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">        </span><span style="color:#F7768E">node-version</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">[</span><span style="color:#9ECE6A">14.x</span><span style="color:#89DDFF">,</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">16.x</span><span style="color:#89DDFF">]</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#F7768E">steps</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">uses</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">actions/checkout@v3</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">uses</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">actions/setup-node@v3</span></span>
<span class="line"><span style="color:#A9B1D6">        </span><span style="color:#F7768E">with</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">          </span><span style="color:#F7768E">node-version</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">${{ matrix.node-version }}</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">run</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">yarn</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">run</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">yarn test</span></span>
<span class="line"><span style="color:#A9B1D6">  </span><span style="color:#F7768E">publish</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#F7768E">needs</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">test</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#F7768E">runs-on</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">ubuntu-latest</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#F7768E">if</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">startsWith(github.ref, &#x27;refs/tags/&#x27;)</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#F7768E">steps</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">uses</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">actions/checkout@v3</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">uses</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">actions/setup-node@v3</span></span>
<span class="line"><span style="color:#A9B1D6">        </span><span style="color:#F7768E">with</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">          </span><span style="color:#F7768E">node-version</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#89DDFF">&#x27;</span><span style="color:#9ECE6A">16.x</span><span style="color:#89DDFF">&#x27;</span></span>
<span class="line"><span style="color:#A9B1D6">          </span><span style="color:#F7768E">registry-url</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">https://registry.npmjs.org/</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">run</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">yarn</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">run</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">yarn publish</span></span>
<span class="line"><span style="color:#A9B1D6">        </span><span style="color:#F7768E">env</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">          </span><span style="color:#F7768E">NODE_AUTH_TOKEN</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">${{ secrets.NPM_TOKEN }}</span></span>
<span class="line"><span style="color:#A9B1D6">  </span><span style="color:#F7768E">create-release</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#F7768E">needs</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">test</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#F7768E">runs-on</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">ubuntu-latest</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#F7768E">if</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">startsWith(github.ref, &#x27;refs/tags/&#x27;)</span></span>
<span class="line"><span style="color:#A9B1D6">    </span><span style="color:#F7768E">steps</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">uses</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">actions/checkout@v3</span></span>
<span class="line"><span style="color:#A9B1D6">      </span><span style="color:#9ABDF5">-</span><span style="color:#A9B1D6"> </span><span style="color:#F7768E">uses</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">Roang-zero1/github-create-release-action@master</span></span>
<span class="line"><span style="color:#A9B1D6">        </span><span style="color:#F7768E">env</span><span style="color:#89DDFF">:</span></span>
<span class="line"><span style="color:#A9B1D6">          </span><span style="color:#F7768E">GITHUB_TOKEN</span><span style="color:#89DDFF">:</span><span style="color:#A9B1D6"> </span><span style="color:#9ECE6A">${{ secrets.GITHUB_TOKEN }}</span></span>
<span class="line"></span></code></pre>
<h2 id="bonus-github-actions-badge"><a aria-hidden="true" tabindex="-1" href="#bonus-github-actions-badge"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Bonus: GitHub Actions Badge</h2>
<p>Once you get your actions working, you may wish to add a status badge to your
readme to show if the build is passing or failing. GitHub Actions have builtin
support for this which you can read more about on their
<a href="https://docs.github.com/en/actions/learn-github-actions#adding-a-workflow-status-badge-to-your-repository">official documentation</a>.</p>]]></content:encoded>
            <author>info@mskelton.dev (Mark Skelton)</author>
        </item>
        <item>
            <title><![CDATA[A Tale of Two Ideas]]></title>
            <link>https://mskelton.dev/blog/a-tale-of-two-ideas</link>
            <guid>https://mskelton.dev/blog/a-tale-of-two-ideas</guid>
            <pubDate>Sat, 02 Nov 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Every day, we encounter ideas and viewpoints that affect our lives in one way or another. In this article, I discuss how to look at differing ideas more objectively to help you make better decisions at work and in your personal life.]]></description>
            <content:encoded><![CDATA[<p>Every day, we encounter ideas and viewpoints that affect our lives in one way or
another. Sometimes we agree with the ideas we hear, other times we disagree, and
many times we aren’t immediately sure if we agree or disagree with the ideas we
encounter. The challenge we face is discerning which ideas are true and which
are false.</p>
<p>While ideas come from a variety of sources, by far the easiest example of
opposing ideas is politics (<em>don’t worry, this is not a political opinion
article</em>). Each election cycle, candidates give speeches and participate in
debates to make their ideas known in an effort to gain supporters who will vote
for them in the upcoming election. However, the decision rests with the voters
who must decide which candidate’s ideas most closely align with their own
beliefs.</p>
<h2 id="forks-in-the-road"><a aria-hidden="true" tabindex="-1" href="#forks-in-the-road"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Forks in the Road</h2>
<p><em>The remainder of this article discusses an example of opposing ideas from my
career in the software development industry. As such, many readers will not find
it very useful due to its technical nature. If you are interested in a more
general example, please let me know in the comments. Thanks!</em></p>
<p>Over the last few months, I’ve been interested in the topic of testing React
components and I came across the concept of shallow rendering. In a nutshell,
shallow rendering allows you to test React components without rendering their
child components. React’s documentation says the following about shallow
rendering (<em>plus some other stuff not relevant to this article</em>).</p>
<blockquote>
<p>Shallow rendering lets you render a component “one level deep”, … This does
not require a DOM.</p>
</blockquote>
<p>While some believe that shallow rendering is a good technique for testing React
components, others disagree thus creating two opposing viewpoints of which
technique is best. While I do not intend on giving my own thoughts on the
subject, I would like to share my thoughts about the two ideas as a way of
demonstrating how to discern between differing viewpoints.</p>
<h2 id="zooming-out"><a aria-hidden="true" tabindex="-1" href="#zooming-out"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Zooming Out</h2>
<p>Once you have identified a set of opposing viewpoints, it is helpful to “zoom
out” from the specifics and look at what high-level differences exist between
the ideas. When we stay “zoomed in” we can miss important details and make poor
judgement calls due to insufficient information. Often, the high-level
differences result in a cascade of logic that eventually leads to the details
that appear to be radically different from each other even though they stem from
similar but slightly different high-level viewpoints.</p>
<p>For my shallow rendering investigation, I compared an article by
<a href="https://kentcdodds.com">Kent C. Dodds</a> called
”<a href="https://kentcdodds.com/blog/why-i-never-use-shallow-rendering">Why I Never Use Shallow Rendering</a>”
with an article by <a href="https://twitter.com/TimCDoherty">Tim Doherty</a> called
”<a href="https://javascript.plainenglish.io/in-defense-of-shallow-rendering-5f627f7c155d">In Defense of Shallow Rendering</a>”.
While you may find other differences, I found two high-level differences between
the articles (<em>again, I’m saving my opinions for a different article</em>). The two
differences I identified were:</p>
<ul>
<li>Overall testing methodology (testing pyramid vs testing trophy)</li>
<li>Definition of “implementation details”</li>
</ul>
<h3 id="testing-methodology"><a aria-hidden="true" tabindex="-1" href="#testing-methodology"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Testing Methodology</h3>
<p>One of the biggest differences between the two opinions on shallow rendering, as
discussed in the aforementioned articles, is the overall testing methodology.
Kent developed the “testing trophy” methodology where integration tests are
favored over unit tests whereas Tim subscribes to the more traditional “testing
pyramid” where unit tests are favored over integration tests. This difference in
how testing should be approached is a big reason why they differ on the idea of
shallow rendering.</p>
<h3 id="implementation-details"><a aria-hidden="true" tabindex="-1" href="#implementation-details"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Implementation Details</h3>
<p>Another difference I noticed was the definition of “implementation details”.
While both Tim and Kent discuss implementation details, they use it to mean very
different things. For example, Tim mentions in his article that “the DOM is an
implementation detail” and goes on to say that child components are
implementation details when testing a parent component. Kent looks at
implementation details from the user’s perspective in which case the DOM would
not be an implementation detail but instead a necessary part of the code. These
difference perspectives on implementation details further explain why the two
authors have very different thoughts on shallow rendering.</p>
<h2 id="making-the-judgement-call"><a aria-hidden="true" tabindex="-1" href="#making-the-judgement-call"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Making the Judgement Call</h2>
<p>So, the question you are probably asking yourself is “which approach is right?”
However, this is not always the best question to ask. While it is often the case
where one idea is right and another idea is wrong, there are instances where
both ideas are right depending on the context or use. Remember that the goal is
not always to find which idea is right and parade that idea through the streets
in a triumphal procession; sometimes simply understanding each idea thoroughly
will help you achieve the results you desire.</p>
<p>In most cases, there comes a time to make the judgement call and decide which
idea you believe to be true. When you do, be prepared for others to disagree
with your conclusion and be willing to accept their feedback. Hearing feedback
from others or searching for more information yourself may result in your
opinion changing on a subject, and that’s okay! Making incorrect judgements,
while undesirable, should be viewed as a learning opportunity rather than a
failure.</p>
<p>Making a decision on a subject can be scary at times especially if the decision
could have an impact on those around you such as your family, friends, or
employer. We have all likely heard of people who made simple decisions that
resulted in a massive problem down the road and while this does happen, don’t
let that stop you from making your decision and moving on. I’ve made many
decisions in my career that I later found were less than ideal or just flat out
wrong! The key in situations like this is simple: learn from the poor decision,
change your future decisions, and move on with your life 🙂</p>
<p><em>If you are interested in the follow up article I wrote to this about my
personal opinions on shallow rendering, check it out
<a href="/blog/the-dangers-of-shallow-rendering">here</a>!</em></p>]]></content:encoded>
            <author>info@mskelton.dev (Mark Skelton)</author>
        </item>
        <item>
            <title><![CDATA[My Experience Changing my GitHub Username]]></title>
            <link>https://mskelton.dev/blog/my-experience-changing-my-github-username</link>
            <guid>https://mskelton.dev/blog/my-experience-changing-my-github-username</guid>
            <pubDate>Sat, 19 Oct 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Are you considering changing your GitHub username? In this article, I discuss everything I learned when changing my GitHub username to help you understand the steps required in this process.]]></description>
            <content:encoded><![CDATA[<p>I created my GitHub account about 3 years ago while working at my first software
development job. At the time, Python was one of my primary languages for
personal projects and was the inspiration for my first StackOverflow and GitHub
username: <code>markypython</code>.</p>
<p>Since that time however, my usage of Python has decreased dramatically as I
moved into JavaScript and Node.js development. I also had begun to use the
username <code>mskelton</code> for most of my other accounts and the inconsistency annoyed
me. However, some initial research into changing my GitHub username got me
pretty frightened and I seriously questioned if it was worth it. Nevertheless,
the desire to change my username remained and I eventually decided to do it.</p>
<h2 id="determining-the-impact"><a aria-hidden="true" tabindex="-1" href="#determining-the-impact"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Determining the Impact</h2>
<p>The first important step in changing my username was determining what the impact
of changing it would be. While
<a href="https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-github-user-account/managing-user-account-settings/changing-your-github-username">GitHub’s documentation</a>
provided some helpful information, I also found two articles by others who have
changed their GitHub username that provided good information about what could
break when you changing your username. I have linked those articles below.</p>
<ul>
<li><a href="https://www.freecodecamp.org/news/a-quick-guide-to-changing-your-github-username/">A quick guide to changing your GitHub username</a></li>
<li><a href="https://www.nikhita.dev/changing-my-github-username">Changing my GitHub username</a></li>
</ul>
<p>I was quite fortunate because I don’t use GitHub pages, Netlify, or any other
service that uses a <code>username.github.io</code> url, so a number of the steps in those
articles did not apply to me. In the end, the changes I was</p>
<ul>
<li>Repository links in <code>package.json</code> and readme files.</li>
<li>Changelogs or contribution links in repositories I’ve contributed to.</li>
<li>VSCode and JetBrains extension links</li>
<li>Travis CI</li>
<li>Git config files</li>
</ul>
<h2 id="taking-the-plunge"><a aria-hidden="true" tabindex="-1" href="#taking-the-plunge"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Taking the Plunge</h2>
<p>Once I was reasonably confident of the impact, I decided to take the plunge and
rename my account. I had already secured my new username and had created a
separate GitHub account for it while I prepared for the rename. Once I was ready
to go, I deleted the temporary account and then renamed my main account to the
new username. GitHub did its thing and within a minute it had successfully
changed my username. Hooray 🎉</p>
<p>After renaming your username, the first step you should take is squatting your
old username. I’ll explain more about this in the next section, but you’ll want
to make sure that you do this immediately after renaming your account.</p>
<p>Once my account was renamed, I started updating my repos in order of most used
to least used. I maintain a JetBrains plugin and two VS Code plugins, so I
started with those so I could get a new patch release out with my updating
username. I use Travis CI for these plugins, and I found that you need to login
to your Travis account and click the sync account button in your account
settings for Travis to update to use your new username. Codecov was similar to
Travis CI, but I found that I needed to logout and then log back in for the
username change to be applied.</p>
<p>When making updates to your repos, take advantage of GitHub’s search feature
which allows you to search all of GitHub for a piece of text. This was very
helpful in determining where my username was being used especially for repos
I’ve contributed to. I even found a repo I didn’t know existed which was based
on one of my repos!</p>
<p>Updating my Git config files was fairly painless by running <code>grep</code> to find which
of my projects needed updating.</p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#A9B1D6">grep markypython </span><span style="color:#89DDFF">*</span><span style="color:#A9B1D6">/.git/config</span></span>
<span class="line"></span></code></pre>
<p>After getting that list, I just did some VS Code multi-cursor editing to
generate a list of <code>sed</code> commands that looked like this. <em>This worked on macOS,
but if you use another Unix-based OS, your mileage may vary.</em></p>
<pre class="shiki" style="background-color:#24283b"><code><span class="line"><span style="color:#A9B1D6">sed -i </span><span style="color:#89DDFF">&#x27;&#x27;</span><span style="color:#A9B1D6"> -e </span><span style="color:#89DDFF">&#x27;</span><span style="color:#9ECE6A">s/markypython/mskelton/</span><span style="color:#89DDFF">&#x27;</span><span style="color:#A9B1D6"> dotfiles/.git/config</span></span>
<span class="line"></span></code></pre>
<h2 id="squatting-your-old-username"><a aria-hidden="true" tabindex="-1" href="#squatting-your-old-username"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Squatting Your Old Username</h2>
<p>When you rename your account, GitHub will setup redirects from your old username
to your new username, but if someone takes over your new username and creates a
repo with the same name, those redirects will no longer go to your repository.
To prevent this, create a new account with your old username and clearly
identify that you renamed your main account.</p>
<p><img src="blog/username.png" alt="Old username clearly indicating that the account was renamed."/></p>
<p>An important note about squatting your old username is that GitHub prohibits
name squatting and holding names for future use in their
<a href="https://docs.github.com/en/github/site-policy/github-username-policy">username policy</a>.
Because of this policy, I would recommend squatting your old username for a
month or two and then deleting your old account so it is available for other
users in the future.</p>
<h2 id="wrapping-it-up"><a aria-hidden="true" tabindex="-1" href="#wrapping-it-up"><span class="relative md:before:content-[&#x27;#&#x27;] before:absolute before:right-2"></span></a>Wrapping It Up</h2>
<p>Aside from the decision to start the processing of renaming my account at 9:30
PM on a Friday night, I am very happy that I decided to rename my account as it
was not nearly as bad as I thought it would be. The changes required are mostly
busy-work and don’t require a huge amount of effort. I wish the best to anyone
else who embarks on the same journey of renaming their GitHub account and I hope
this article was helpful in explaining some of that process!</p>
<p>You can view my GitHub repository with my new username at
<a href="https://github.com/mskelton">github.com/mskelton</a>.</p>]]></content:encoded>
            <author>info@mskelton.dev (Mark Skelton)</author>
        </item>
    </channel>
</rss>